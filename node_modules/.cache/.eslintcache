[{"E:\\React\\workspace\\order-ticket\\src\\index.js":"1","E:\\React\\workspace\\order-ticket\\src\\App.jsx":"2","E:\\React\\workspace\\order-ticket\\src\\components\\MyNavLink\\index.jsx":"3","E:\\React\\workspace\\order-ticket\\src\\api\\ajax.js":"4","E:\\React\\workspace\\order-ticket\\src\\pages\\Root\\index.jsx":"5","E:\\React\\workspace\\order-ticket\\src\\components\\LinkButton\\index.jsx":"6","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\index.jsx":"7","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Welcome\\index.jsx":"8","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Platform\\index.jsx":"9","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Order\\index.jsx":"10","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Carriage\\index.jsx":"11","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\Home\\index.jsx":"12","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\CarriageInfo\\index.jsx":"13","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\SiteInfo\\index.jsx":"14","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Site\\index.jsx":"15","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\index.jsx":"16","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\index.jsx":"17","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\TicketList\\index.jsx":"18","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Search\\index.jsx":"19","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Register\\index.jsx":"20","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Home\\index.jsx":"21","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Login\\index.jsx":"22","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Login\\index.jsx":"23","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\OrderTicket\\index.jsx":"24","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\OrderInfo\\index.jsx":"25","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Complete\\index.jsx":"26","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Center\\index.jsx":"27","E:\\React\\workspace\\order-ticket\\src\\components\\DevLeftNav\\index.jsx":"28","E:\\React\\workspace\\order-ticket\\src\\components\\UserLeftNav\\index.jsx":"29","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Home\\index.jsx":"30","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\MyOrder\\index.jsx":"31","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Passenger\\index.jsx":"32","E:\\React\\workspace\\order-ticket\\src\\utils\\MemoryUser\\index.jsx":"33","E:\\React\\workspace\\order-ticket\\src\\utils\\storageUtils\\index.jsx":"34","E:\\React\\workspace\\order-ticket\\src\\api\\dev\\site.js":"35","E:\\React\\workspace\\order-ticket\\src\\api\\dev\\admin.js":"36","E:\\React\\workspace\\order-ticket\\src\\api\\dev\\carriage.js":"37","E:\\React\\workspace\\order-ticket\\src\\api\\dev\\train.js":"38","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\Add\\index.jsx":"39","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\Updata\\index.jsx":"40","E:\\React\\workspace\\order-ticket\\src\\api\\dev\\order.js":"41","E:\\React\\workspace\\order-ticket\\src\\api\\user\\search.js":"42","E:\\React\\workspace\\order-ticket\\src\\api\\user\\user.js":"43","E:\\React\\workspace\\order-ticket\\src\\api\\user\\order.js":"44","E:\\React\\workspace\\order-ticket\\src\\common\\methods.js":"45"},{"size":415,"mtime":1632281632095,"results":"46","hashOfConfig":"47"},{"size":519,"mtime":1630983596855,"results":"48","hashOfConfig":"47"},{"size":237,"mtime":1629884746066,"results":"49","hashOfConfig":"47"},{"size":1410,"mtime":1633677212812,"results":"50","hashOfConfig":"47"},{"size":761,"mtime":1630994754982,"results":"51","hashOfConfig":"47"},{"size":188,"mtime":1630482787747,"results":"52","hashOfConfig":"47"},{"size":661,"mtime":1632293716540,"results":"53","hashOfConfig":"47"},{"size":239,"mtime":1630995268853,"results":"54","hashOfConfig":"47"},{"size":13129,"mtime":1632990043934,"results":"55","hashOfConfig":"47"},{"size":10227,"mtime":1632989380501,"results":"56","hashOfConfig":"47"},{"size":21968,"mtime":1632989789728,"results":"57","hashOfConfig":"47"},{"size":4629,"mtime":1632989946330,"results":"58","hashOfConfig":"47"},{"size":11598,"mtime":1632464762500,"results":"59","hashOfConfig":"47"},{"size":7440,"mtime":1632464743309,"results":"60","hashOfConfig":"47"},{"size":9963,"mtime":1631856786939,"results":"61","hashOfConfig":"47"},{"size":535,"mtime":1630987259106,"results":"62","hashOfConfig":"47"},{"size":1215,"mtime":1631606656447,"results":"63","hashOfConfig":"47"},{"size":10480,"mtime":1632990397025,"results":"64","hashOfConfig":"47"},{"size":4998,"mtime":1632908605315,"results":"65","hashOfConfig":"47"},{"size":4515,"mtime":1632820936756,"results":"66","hashOfConfig":"47"},{"size":3138,"mtime":1633676663085,"results":"67","hashOfConfig":"47"},{"size":2580,"mtime":1633673860624,"results":"68","hashOfConfig":"47"},{"size":2652,"mtime":1632642896385,"results":"69","hashOfConfig":"47"},{"size":21393,"mtime":1632990588036,"results":"70","hashOfConfig":"47"},{"size":8289,"mtime":1632990609094,"results":"71","hashOfConfig":"47"},{"size":3412,"mtime":1632882654622,"results":"72","hashOfConfig":"47"},{"size":514,"mtime":1632897680117,"results":"73","hashOfConfig":"47"},{"size":1790,"mtime":1632465002610,"results":"74","hashOfConfig":"47"},{"size":1294,"mtime":1632465001716,"results":"75","hashOfConfig":"47"},{"size":2601,"mtime":1633675158235,"results":"76","hashOfConfig":"47"},{"size":8845,"mtime":1632908484858,"results":"77","hashOfConfig":"47"},{"size":14511,"mtime":1633673059819,"results":"78","hashOfConfig":"47"},{"size":49,"mtime":1631693811716,"results":"79","hashOfConfig":"80"},{"size":1145,"mtime":1633675664318,"results":"81","hashOfConfig":"47"},{"size":260,"mtime":1631779097218,"results":"82","hashOfConfig":"47"},{"size":679,"mtime":1632388812895,"results":"83","hashOfConfig":"47"},{"size":533,"mtime":1631866271148,"results":"84","hashOfConfig":"47"},{"size":615,"mtime":1632368049332,"results":"85","hashOfConfig":"47"},{"size":7668,"mtime":1632465352138,"results":"86","hashOfConfig":"47"},{"size":11258,"mtime":1632465296991,"results":"87","hashOfConfig":"47"},{"size":317,"mtime":1632380678511,"results":"88","hashOfConfig":"47"},{"size":297,"mtime":1632639563741,"results":"89","hashOfConfig":"47"},{"size":1075,"mtime":1632902550399,"results":"90","hashOfConfig":"47"},{"size":367,"mtime":1632809008579,"results":"91","hashOfConfig":"47"},{"size":223,"mtime":1633675454563,"results":"92","hashOfConfig":"47"},{"filePath":"93","messages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},"zv7isu",{"filePath":"96","messages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"98","messages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"100","messages":"101","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"102","messages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"104","messages":"105","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"106","messages":"107","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"108","messages":"109","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"110","messages":"111","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"112","messages":"113","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114","usedDeprecatedRules":"95"},{"filePath":"115","messages":"116","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"117","usedDeprecatedRules":"95"},{"filePath":"118","messages":"119","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"120","messages":"121","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"122","usedDeprecatedRules":"95"},{"filePath":"123","messages":"124","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"125","usedDeprecatedRules":"95"},{"filePath":"126","messages":"127","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"128","usedDeprecatedRules":"95"},{"filePath":"129","messages":"130","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"131","messages":"132","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"133","messages":"134","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"135","usedDeprecatedRules":"95"},{"filePath":"136","messages":"137","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"138","usedDeprecatedRules":"95"},{"filePath":"139","messages":"140","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"141","messages":"142","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"143","messages":"144","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"145","messages":"146","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"147","messages":"148","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"149","usedDeprecatedRules":"95"},{"filePath":"150","messages":"151","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"152","usedDeprecatedRules":"95"},{"filePath":"153","messages":"154","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"155","messages":"156","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"157","messages":"158","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"159","messages":"160","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"161","messages":"162","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"163","messages":"164","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"165","usedDeprecatedRules":"95"},{"filePath":"166","messages":"167","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"168","usedDeprecatedRules":"95"},{"filePath":"169","messages":"170","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"dsg5fd",{"filePath":"171","messages":"172","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"173","usedDeprecatedRules":"95"},{"filePath":"174","messages":"175","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"176","messages":"177","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"178","messages":"179","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"180","messages":"181","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"182","messages":"183","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"184","messages":"185","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"186","usedDeprecatedRules":"95"},{"filePath":"187","messages":"188","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"189","messages":"190","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"191","messages":"192","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"193","messages":"194","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},{"filePath":"195","messages":"196","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"95"},"E:\\React\\workspace\\order-ticket\\src\\index.js",[],["197","198"],"E:\\React\\workspace\\order-ticket\\src\\App.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\components\\MyNavLink\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\api\\ajax.js",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Root\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\components\\LinkButton\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Welcome\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Platform\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Order\\index.jsx",["199"],"import React, { Component } from 'react'\r\nimport {\r\n    Input, Table, Card, Form, Button, Col, Row, Select, message\r\n} from 'antd';\r\nimport moment from 'moment'\r\nimport { getOrderList } from '../../../api/dev/order';\r\n\r\nconst { Option } = Select\r\nconst format = 'YYYY-MM-DD HH:mm'\r\nconst dataformat = 'YYYY-MM-DD HH:mm:ss'\r\nexport default class Order extends Component {\r\n\r\n    state = {\r\n        pageNum: 1,\r\n        pageSize: 5,\r\n        dataSource: [],\r\n        totalCount: 0\r\n    }\r\n\r\n    myForm = React.createRef()\r\n    // 清空表单\r\n    onReset = () => {\r\n        this.myForm.current.resetFields()\r\n    }\r\n\r\n    onSearch = async (values) => {\r\n        const { pageNum, pageSize } = this.state\r\n        const { idCard, orderStatus, passengerName, seatType, trainNumber } = values\r\n        const result = await getOrderList(pageNum, pageSize, trainNumber ? trainNumber : undefined, passengerName ? passengerName : undefined, idCard ? idCard : undefined, orderStatus ? orderStatus : undefined, seatType ? seatType : undefined)\r\n        if (result.code === 1) {\r\n            this.setState({ dataSource: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { pageNum, pageSize } = this.state\r\n        this.getOrderList(pageNum, pageSize)\r\n    }\r\n    async getOrderList(pageNum, pageSize) {\r\n        const result = await getOrderList(pageNum, pageSize)\r\n        if (result.code === 1) {\r\n            this.setState({ dataSource: result.data, totalCount: result.totalCount })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { dataSource, pageSize, totalCount } = this.state\r\n        const columns = [\r\n            {\r\n                title: '车次',\r\n                dataIndex: 'trainNumber',\r\n                key: '1',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '出发日期',\r\n                dataIndex: 'startDateTime',\r\n                key: '2',\r\n                align: 'center',\r\n                render: (_, record) => {\r\n                    return record.startDate + \" \" + record.startTime\r\n                }\r\n            },\r\n            {\r\n                title: '起点站',\r\n                dataIndex: 'startName',\r\n                key: '3',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '终点站',\r\n                key: '4',\r\n                dataIndex: 'endName',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '达到时间',\r\n                key: '5',\r\n                dataIndex: 'endDateTime',\r\n                align: 'center',\r\n                render: (_, record) => {\r\n                    return record.endDate + \" \" + record.endTime\r\n                }\r\n            },\r\n            {\r\n                title: '乘客姓名',\r\n                key: '6',\r\n                dataIndex: 'passengerName',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '乘客身份证',\r\n                key: '7',\r\n                dataIndex: 'passengerCard',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '座位类别',\r\n                key: '8',\r\n                dataIndex: 'levelCar',\r\n                align: 'center',\r\n                render: (level) => {\r\n                    return level === 1 ? '豪华' : (level === 2 ? '普通' : '经济')\r\n                }\r\n            },\r\n            {\r\n                title: '座位号',\r\n                key: '9',\r\n                dataIndex: 'seatNumber',\r\n                align: 'center',\r\n                render: (_, record) => {\r\n                    return `${record.carriageOrder}车-${record.seatNumber}`\r\n                }\r\n            },\r\n            {\r\n                title: '下单时时间',\r\n                key: '10',\r\n                dataIndex: 'orderTime',\r\n                align: 'center',\r\n                render: (time) => {\r\n                    return moment(parseInt(time)).format(dataformat)\r\n                }\r\n            },\r\n            {\r\n                title: '支付状态',\r\n                key: '11',\r\n                dataIndex: 'orderStatus',\r\n                align: 'center',\r\n                render: (orderStatus) => {\r\n                    return orderStatus === 0 ? '未支付' : (orderStatus === 1 ? '已支付' : '已取消')\r\n                }\r\n            },\r\n        ];\r\n\r\n        // const dataSource = [\r\n        //     {\r\n        //         key: '1',\r\n        //         trainsNumber: 'G2154',\r\n        //         startDate: '2021.01.01',\r\n        //         startStation: '成都',\r\n        //         endStation: '北京',\r\n        //         endDate: '2021.01.01',\r\n        //         name: '张三',\r\n        //         idCard: '5108212121212',\r\n        //         seatType: '豪华',\r\n        //         seatNumber: 'A12',\r\n        //         orderTime: '2121.01.01',\r\n        //         payState: '已支付',\r\n        //     },\r\n        // ]\r\n\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Card\r\n                        title={<span style={{ fontSize: '30px' }}>车票管理</span>}\r\n                    >\r\n                        <div>\r\n                            <Form\r\n                                ref={this.myForm}\r\n                                layout=\"inline\"\r\n                                onFinish={this.onSearch}\r\n                            >\r\n                                <Row gutter={16}>\r\n                                    <Col span={4}>\r\n                                        <Form.Item\r\n                                            name=\"trainNumber\"\r\n                                        >\r\n                                            <Input placeholder=\"车次\" />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                    <Col span={4}>\r\n                                        <Form.Item\r\n                                            name=\"passengerName\"\r\n                                        >\r\n                                            <Input placeholder=\"乘客姓名\" />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                    <Col span={6}>\r\n                                        <Form.Item\r\n                                            name=\"idCard\"\r\n                                            rules={[{\r\n                                                len: 18,\r\n                                                message: '请输入正确的身份证号码！',\r\n                                                pattern: new RegExp(/^[1-9]\\d*$/, \"g\")\r\n                                            }]\r\n                                            }\r\n                                        >\r\n                                            <Input placeholder=\"乘客身份证\" />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                    <Col span={4}>\r\n                                        <Form.Item\r\n                                            name=\"orderStatus\"\r\n                                        >\r\n                                            <Select placeholder=\"订单状态\">\r\n                                                <Option value={1}>已支付</Option>\r\n                                                <Option value={0}>未支付</Option>\r\n                                                <Option value={2}>已取消</Option>\r\n                                            </Select>\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                    <Col span={4}>\r\n                                        <Form.Item\r\n                                            name=\"seatType\"\r\n                                        >\r\n                                            <Select placeholder=\"座位类别\">\r\n                                                <Option value={1}>豪华</Option>\r\n                                                <Option value={2}>普通</Option>\r\n                                                <Option value={3}>经济</Option>\r\n                                            </Select>\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Col span={0.3}\r\n                                    style={{ marginRight: '20px' }}\r\n                                >\r\n                                    <Form.Item>\r\n                                        <Button type=\"primary\" htmlType=\"submit\" shape=\"round\" >查询</Button>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                                <Col span={1}\r\n                                >\r\n                                    <Form.Item>\r\n                                        <Button shape=\"round\" htmlType=\"button\" onClick={this.onReset}>重置</Button>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Form>\r\n                        </div>\r\n                        <div style={{ marginTop: '20px' }}>\r\n                            <Table\r\n                                columns={columns}\r\n                                dataSource={dataSource}\r\n                                bordered\r\n                                rowKey=\"id\"\r\n                                pagination={{\r\n                                    onChange: page => {\r\n                                        this.getOrderList(page, pageSize)\r\n                                    },\r\n                                    pageSize: pageSize,\r\n                                    total: totalCount,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Carriage\\index.jsx",["200"],"import React, { Component } from 'react'\r\nimport { Card, Button, Table, Modal, Space, Form, Input, Col, Row, Radio, message, Popconfirm } from 'antd'\r\nimport {\r\n    PlusOutlined\r\n} from '@ant-design/icons';\r\nimport LinkButton from '../../../components/LinkButton';\r\nimport { addCarriage, carriageInfo, listCarriage, editCarriage, deleteCarriage } from '../../../api/dev/carriage';\r\n\r\nexport default class Carriage extends Component {\r\n\r\n    state = {\r\n        showStatus: 0,// 0都不显示，1显示新增，2显示编辑\r\n        seatCount: 0,\r\n        carriageList: [],\r\n        pageNum: 1,\r\n        pageSize: 5,\r\n        carriage: {}\r\n    }\r\n\r\n    // 打开新增模态窗口\r\n    showAddModal = () => {\r\n        this.setState({ showStatus: 1 })\r\n    }\r\n    // 打开编辑模态窗口\r\n    showUpdateModal = async (record) => {\r\n        const result = await carriageInfo(record.id)\r\n        if (result.code === 1) {\r\n            this.setState({ carriage: result.data, seatCount: result.data.seatCount })\r\n        } else {\r\n            message.error(result.msg)\r\n            return\r\n        }\r\n        this.setState({ showStatus: 2 })\r\n    }\r\n    // 更新车厢信息\r\n    updateCarriage = () => {\r\n        this.setState({ showStatus: 0 })\r\n    }\r\n\r\n    // 删除车厢\r\n    deleteCarriage = async (record) => {\r\n        const result = await deleteCarriage(record.id)\r\n        if (result.code === 1) {\r\n            const { pageNum, pageSize } = this.state\r\n            this.getCarriageList(pageNum, pageSize)\r\n        } else {\r\n            message.error(result.msg)\r\n            return\r\n        }\r\n    }\r\n\r\n    // 处理点击取消\r\n    handleCancel = () => {\r\n        this.setState({ showStatus: 0, seatCount: 0 })\r\n    }\r\n\r\n    // 输入完规格计算座位数\r\n    handleBlur = () => {\r\n        const left = this.leftInput.props.value * 1\r\n        const right = this.rightInput.props.value * 1\r\n        const row = this.rowInput.props.value\r\n        if (isNaN(left) || isNaN(right) || isNaN(row)) return\r\n        const seatCount = (left + right) * row\r\n        this.setState({ seatCount })\r\n    }\r\n\r\n    // 添加车厢\r\n    addCarriage = async (values) => {\r\n        const { seatCount } = this.state\r\n        const { adapter, carriageNumber, level, sizeLeft, sizeRight, sizeRow } = values\r\n        const carriage = { adapter, carriageNumber, level, sizeLeft, sizeRight, sizeRow, seatCount }\r\n        const result = await addCarriage(carriage)\r\n        if (result.code === 1) {\r\n            message.success(\"添加成功\")\r\n            const { pageNum, pageSize } = this.state\r\n            this.getCarriageList(pageNum, pageSize)\r\n            this.setState({ showStatus: 0, seatCount: 0 })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n\r\n    // 编辑车厢\r\n    editCarriage = async (values) => {\r\n        console.log(values)\r\n        const { seatCount } = this.state\r\n        const id = this.state.carriage.id\r\n        const { adapter, level, priceBase, sizeLeft, sizeRight, sizeRow } = values\r\n        const carriage = { adapter, level, priceBase, sizeLeft, sizeRight, sizeRow, seatCount, id }\r\n        const result = await editCarriage(carriage)\r\n        if (result.code === 1) {\r\n            message.success(\"编辑成功\")\r\n            this.setState({ showStatus: 0, seatCount: 0 })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    // 组件挂载完毕的时候去拉数据库，获取车厢列表\r\n    componentDidMount() {\r\n        const { pageNum, pageSize } = this.state\r\n        this.getCarriageList(pageNum, pageSize)\r\n    }\r\n\r\n    async getCarriageList(pageNum, pageSize) {\r\n        const result = await listCarriage(pageNum, pageSize)\r\n        if (result.code === 1) {\r\n            this.setState({\r\n                carriageList: result.data,\r\n                totalCount: result.totalCount,\r\n                pageSize: result.pageSize\r\n            })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const { carriage, pageSize, totalCount } = this.state\r\n        const columns = [\r\n            {\r\n                title: '编号',\r\n                dataIndex: 'carriageNumber',\r\n                key: '1',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '级别',\r\n                dataIndex: 'levelCar',\r\n                key: '2',\r\n                align: 'center',\r\n                render: (levelCar) => {\r\n                    return levelCar === 1 ? '豪华' : (levelCar === 2 ? '普通' : '经济')\r\n                }\r\n            },\r\n            {\r\n                title: '规格',\r\n                dataIndex: 'size',\r\n                key: '3',\r\n                align: 'center',\r\n                render: (_, record) => {\r\n                    return `(${record.leftSeat}+${record.rightSeat})*${record.rowSeat}`\r\n                }\r\n            },\r\n            {\r\n                title: '座位数',\r\n                key: '4',\r\n                dataIndex: 'seatCount',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '价格基数',\r\n                key: '5',\r\n                dataIndex: 'priceBase',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '适配车型',\r\n                key: '6',\r\n                dataIndex: 'adaptModel',\r\n                align: 'center',\r\n                render: (adaptModel) => {\r\n                    return adaptModel === 1 ? '动车' : (adaptModel === 2 ? '高铁' : '动车、高铁')\r\n                }\r\n            },\r\n            {\r\n                title: '操作',\r\n                key: '7',\r\n                render: (record) => (\r\n                    <Space size=\"middle\">\r\n                        <LinkButton onClick={() => { this.showUpdateModal(record) }}>编辑</LinkButton>\r\n                        <Popconfirm title=\"确定删除吗？\" okText=\"是\" cancelText=\"否\" onConfirm={() => { this.deleteCarriage(record) }}>\r\n                            <LinkButton>删除</LinkButton>\r\n                        </Popconfirm>\r\n                    </Space>\r\n                ),\r\n                align: 'center'\r\n            },\r\n        ]\r\n\r\n        const { seatCount, showStatus, carriageList } = this.state\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Card\r\n                        title={<span style={{ fontSize: '30px' }}>车厢管理</span>}\r\n                        extra={<Button icon={<PlusOutlined />} type=\"primary\" onClick={this.showAddModal} >新增</Button>}\r\n                    >\r\n                        <Table\r\n                            columns={columns}\r\n                            dataSource={carriageList}\r\n                            bordered\r\n                            rowKey=\"id\"\r\n                            pagination={{\r\n                                onChange: page => {\r\n                                    this.getCarriageList(page, pageSize)\r\n                                },\r\n                                pageSize: pageSize,\r\n                                total: totalCount,\r\n                            }}\r\n                        />\r\n                    </Card>\r\n                </div>\r\n                {/* 新增的modal */}\r\n                <div>\r\n                    <Modal\r\n                        title=\"新增车厢信息\"\r\n                        visible={showStatus === 1}\r\n                        onCancel={this.handleCancel}\r\n                        footer={[]}\r\n                        width='800px'\r\n                        style={{ top: 10 }}\r\n                        destroyOnClose='true'\r\n                    >\r\n                        <Form\r\n                            layout=\"vertical\"\r\n                            onFinish={this.addCarriage}\r\n                        >\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"carriageNumber\"\r\n                                        label=\"编号\"\r\n                                        rules={[{ required: true, message: '请输入编号' }]}\r\n                                        required=\"true\"\r\n                                    >\r\n                                        <Input placeholder=\"请输入编号\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            {/* <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"priceBase\"\r\n                                        label=\"价格基数\"\r\n                                        rules={[{ required: true, message: '请输入价格基数' }]}\r\n                                    >\r\n                                        <Select style={{ width: 100 }} onChange={(value) => { this.selectType(value, record) }}>\r\n                                            <Option value={15}>豪华（15）</Option>\r\n                                            <Option value={10}>普通（10）</Option>\r\n                                           <Option value={5}>经济（5）</Option> \r\n                                            \r\n                                        </Select>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row> */}\r\n                            <Row gutter={16}>\r\n                                <Col span={4}>\r\n                                    <Form.Item\r\n                                        name=\"sizeLeft\"\r\n                                        label=\"规格\"\r\n                                        rules={[{ required: true, message: '请输入规格' }]}\r\n                                    >\r\n                                        <Input ref={(input) => { this.leftInput = input }} onBlur={this.handleBlur} placeholder=\"左\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                                <Col span={4}>\r\n                                    <Form.Item\r\n                                        name=\"sizeRight\"\r\n                                        label=\" \"\r\n                                        rules={[{ required: true, message: '请输入规格' }]}\r\n                                    >\r\n                                        <Input ref={(input) => { this.rightInput = input }} onBlur={this.handleBlur} placeholder=\"右\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                                <Col span={4}>\r\n                                    <Form.Item\r\n                                        name=\"sizeRow\"\r\n                                        label=\" \"\r\n                                        rules={[{ required: true, message: '请输入规格' }]}\r\n                                    >\r\n                                        <Input ref={(input) => { this.rowInput = input }} placeholder=\"行\" onBlur={this.handleBlur} />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"seatNumber\"\r\n                                        label=\"座位数\"\r\n                                        rules={[{ required: false }]}\r\n                                    >\r\n                                        <span>{seatCount}</span>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"level\"\r\n                                        label=\"级别\"\r\n                                        rules={[{ required: true }]}\r\n                                    >\r\n                                        <Radio.Group>\r\n                                            <Radio value={1}>豪华</Radio>\r\n                                            <Radio value={2}>普通</Radio>\r\n                                            <Radio value={3}>经济</Radio>\r\n                                        </Radio.Group>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"adapter\"\r\n                                        label=\"适配车型\"\r\n                                        rules={[{ required: true }]}\r\n                                    >\r\n                                        <Radio.Group name=\"radiogroup\" >\r\n                                            <Radio value={1}>动车</Radio>\r\n                                            <Radio value={2}>高铁</Radio>\r\n                                            <Radio value={3}>动车、特快</Radio>\r\n                                        </Radio.Group>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <div\r\n                                style={{\r\n                                    textAlign: 'right',\r\n                                    marginTop: '50px'\r\n                                }}\r\n                            >\r\n                                <Space size=\"large\">\r\n                                    <Button onClick={this.handleCancel} style={{ marginRight: 8 }}>\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">\r\n                                        确认\r\n                                    </Button>\r\n                                </Space>\r\n\r\n                            </div>\r\n                        </Form>\r\n                    </Modal>\r\n                </div>\r\n                {/* 编辑的modal */}\r\n                <div>\r\n                    <Modal\r\n                        title=\"编辑车厢信息\"\r\n                        visible={showStatus === 2}\r\n                        onCancel={this.handleCancel}\r\n                        footer={[]}\r\n                        width='800px'\r\n                        style={{ top: 10 }}\r\n                        destroyOnClose='true'\r\n                    >\r\n                        <Form\r\n                            layout=\"vertical\"\r\n                            onFinish={this.editCarriage}\r\n                        >\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"carriageNumber\"\r\n                                        label=\"编号\"\r\n                                        rules={[{ required: true, message: '请输入编号' }]}\r\n                                        required=\"true\"\r\n                                        initialValue={carriage.carriageNumber}\r\n                                    >\r\n                                        <Input placeholder=\"请输入车厢编号\" readOnly />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"priceBase\"\r\n                                        label=\"价格基数\"\r\n                                        rules={[{ required: true, message: '请输入价格基数' }]}\r\n                                        initialValue={carriage.priceBase}\r\n                                    >\r\n                                        <Input placeholder=\"请输入价格基数\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={4}>\r\n                                    <Form.Item\r\n                                        name=\"sizeLeft\"\r\n                                        label=\"规格\"\r\n                                        rules={[{ required: true, message: '请输入规格' }]}\r\n                                        initialValue={carriage.leftSeat}\r\n                                    >\r\n                                        <Input ref={(input) => { this.leftInput = input }} onBlur={this.handleBlur} placeholder=\"请输入规格\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                                <Col span={4}>\r\n                                    <Form.Item\r\n                                        name=\"sizeRight\"\r\n                                        label=\" \"\r\n                                        rules={[{ required: true, message: '请输入规格' }]}\r\n                                        initialValue={carriage.rightSeat}\r\n                                    >\r\n                                        <Input ref={(input) => { this.rightInput = input }} onBlur={this.handleBlur} placeholder=\"请输入规格\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                                <Col span={4}>\r\n                                    <Form.Item\r\n                                        name=\"sizeRow\"\r\n                                        label=\" \"\r\n                                        rules={[{ required: true, message: '请输入规格' }]}\r\n                                        initialValue={carriage.rowSeat}\r\n                                    >\r\n                                        <Input ref={(input) => { this.rowInput = input }} placeholder=\"行\" onBlur={this.handleBlur} placeholder=\"请输入规格\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"seatNumber\"\r\n                                        label=\"座位数\"\r\n                                        rules={[{ required: false }]}\r\n                                        initialValue={carriage.seatCount}\r\n                                    >\r\n                                        <span>{seatCount}</span>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"level\"\r\n                                        label=\"级别\"\r\n                                        rules={[{ required: true }]}\r\n                                        initialValue={carriage.levelCar}\r\n                                    >\r\n                                        <Radio.Group >\r\n                                            <Radio value={1}>豪华</Radio>\r\n                                            <Radio value={2}>普通</Radio>\r\n                                            <Radio value={3}>经济</Radio>\r\n                                        </Radio.Group>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"adapter\"\r\n                                        label=\"适配车型\"\r\n                                        rules={[{ required: true }]}\r\n                                        initialValue={carriage.adaptModel}\r\n                                    >\r\n                                        <Radio.Group name=\"radiogroup\" >\r\n                                            <Radio value={1}>动车</Radio>\r\n                                            <Radio value={2}>特快</Radio>\r\n                                            <Radio value={3}>动车、特快</Radio>\r\n                                        </Radio.Group>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <div\r\n                                style={{\r\n                                    textAlign: 'right',\r\n                                    marginTop: '50px'\r\n                                }}\r\n                            >\r\n                                <Space size=\"large\">\r\n                                    <Button onClick={this.handleCancel} style={{ marginRight: 8 }}>\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">\r\n                                        确认\r\n                                    </Button>\r\n                                </Space>\r\n\r\n                            </div>\r\n                        </Form>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\Home\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\CarriageInfo\\index.jsx",["201","202"],"import React, { useContext, useState, useEffect, useRef } from 'react';\r\nimport { Card, Button, Table, Modal, Space, Form, Input, Select, Popconfirm, Divider, message } from 'antd'\r\nimport {\r\n    PlusOutlined\r\n} from '@ant-design/icons';\r\n\r\nimport LinkButton from '../../../../components/LinkButton';\r\nimport { getCarriageList } from '../../../../api/dev/train';\r\nimport { carriageInfo } from '../../../../api/dev/carriage';\r\nconst { Option } = Select\r\nconst EditableContext = React.createContext(null);\r\n\r\nconst EditableRow = ({ index, ...props }) => {\r\n    const [form] = Form.useForm();\r\n    return (\r\n        <Form form={form} component={false}>\r\n            <EditableContext.Provider value={form}>\r\n                <tr {...props} />\r\n            </EditableContext.Provider>\r\n        </Form>\r\n    );\r\n};\r\n\r\nconst EditableCell = ({\r\n    title,\r\n    editable,\r\n    children,\r\n    dataIndex,\r\n    record,\r\n    handleSave,\r\n    ...restProps\r\n}) => {\r\n    const [editing, setEditing] = useState(false);\r\n    const inputRef = useRef(null);\r\n    const form = useContext(EditableContext);\r\n    useEffect(() => {\r\n        if (editing) {\r\n            inputRef.current.focus();\r\n        }\r\n    }, [editing]);\r\n\r\n    const toggleEdit = () => {\r\n        setEditing(!editing);\r\n        form.setFieldsValue({\r\n            [dataIndex]: record[dataIndex],\r\n        });\r\n    };\r\n\r\n    const save = async () => {\r\n        try {\r\n            const values = await form.validateFields();\r\n            toggleEdit();\r\n            handleSave({ ...record, ...values });\r\n        } catch (errInfo) {\r\n            console.log('Save failed:', errInfo);\r\n        }\r\n    };\r\n\r\n    let childNode = children;\r\n\r\n    if (editable) {\r\n        childNode = editing ? (\r\n            <Form.Item\r\n                style={{\r\n                    margin: 0,\r\n                }}\r\n                name={dataIndex}\r\n                rules={[\r\n                    {\r\n                        required: true,\r\n                        message: `${title}是必填的`,\r\n                    },\r\n                ]}\r\n            >\r\n                <Input ref={inputRef} onPressEnter={save} onBlur={save} />\r\n            </Form.Item>\r\n        ) : (\r\n            <div\r\n                className=\"editable-cell-value-wrap\"\r\n                style={{\r\n                    paddingRight: 24,\r\n                }}\r\n                onClick={toggleEdit}\r\n            >\r\n                {children}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return <td {...restProps}>{childNode}</td>;\r\n};\r\n\r\nexport default class CarriageInfo extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.columns = [\r\n            {\r\n                title: '车厢序号',\r\n                dataIndex: 'carriageOrder',\r\n                key: '2',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '车厢编号',\r\n                dataIndex: 'carriageNumber',\r\n                key: '3',\r\n                align: 'center',\r\n                editable: true,\r\n            },\r\n            {\r\n                title: '类别',\r\n                dataIndex: 'type',\r\n                key: '4',\r\n                align: 'center',\r\n                editable: true,\r\n            },\r\n            {\r\n                title: '座位数',\r\n                dataIndex: 'seatNumber',\r\n                key: '5',\r\n                align: 'center',\r\n                editable: true,\r\n            },\r\n            {\r\n                title: '价格基数',\r\n                dataIndex: 'priceBase',\r\n                key: '6',\r\n                align: 'center',\r\n                editable: true,\r\n            },\r\n            {\r\n                title: '操作',\r\n                align: 'center',\r\n                render: (_, record) =>\r\n                    this.state.dataSource.length >= 1 ? (\r\n                        <div>\r\n                            <Popconfirm title=\"确定删除吗\" onConfirm={() => this.handleDelete(record.carriageOrder)}>\r\n                                <LinkButton >删除</LinkButton>\r\n                            </Popconfirm>\r\n                        </div>\r\n                    ) : null,\r\n            },\r\n        ];\r\n        this.state = {\r\n            dataSource: [],\r\n            count: 1,\r\n            showStatus: 0,\r\n            carriages: [],\r\n            carriageOrder: 1,\r\n        }\r\n    }\r\n\r\n\r\n    handleDelete = (key) => {\r\n        const dataSource = [...this.state.dataSource];\r\n        const newDataSource = dataSource.filter((item) => {\r\n            if (item.carriageOrder !== key) {\r\n                if (item.carriageOrder > key) {\r\n                    --item.carriageOrder\r\n                }\r\n                return item\r\n            }\r\n        })\r\n        this.props.deleteCarriage(key)\r\n        if (newDataSource.length === 0) this.setState({ count: 1 })\r\n        this.setState({\r\n            dataSource: newDataSource,\r\n        });\r\n    }\r\n    handleAdd = async () => {\r\n        // 调接口拿数据\r\n        const result = await getCarriageList()\r\n        if (result.code === 1) {\r\n            this.setState({ showStatus: 1, carriages: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n    handleSave = (row) => {\r\n        const newData = [...this.state.dataSource];\r\n        const index = newData.findIndex((item) => row.key === item.key);\r\n        const item = newData[index];\r\n        newData.splice(index, 1, { ...item, ...row });\r\n        this.setState({\r\n            dataSource: newData,\r\n        });\r\n    }\r\n\r\n    // 处理点击取消\r\n    handleCancel = () => {\r\n        this.setState({ showStatus: 0 })\r\n    }\r\n\r\n    // 表单提交\r\n    onFinish = async (values) => {\r\n        const result = await carriageInfo(values.carriageId)\r\n        if (result.code === 1) {\r\n            const { dataSource, carriages } = this.state\r\n            const { data } = result\r\n            const newData = {\r\n                key: values.carriageId,\r\n                carriageOrder: dataSource.length + 1,\r\n                carriageNumber: data.carriageNumber,\r\n                type: data.levelCar === 1 ? '豪华' : (data.levelCar === 2 ? '普通' : '经济'),\r\n                seatNumber: data.seatCount,\r\n                priceBase: data.priceBase,\r\n            }\r\n            const newCarriageLists = carriages.filter((item) => {\r\n                return item.id !== values.carriageId\r\n            })\r\n            this.props.addCarriage(values.carriageId)\r\n            this.setState({\r\n                dataSource: [...dataSource, newData],\r\n                count: dataSource.length + 1,\r\n                carriages: carriages\r\n            })\r\n            this.setState({ showStatus: 0 })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        let { carriageOrder } = this.state\r\n        let { carriageList } = this.props\r\n        if (!carriageList) return\r\n        const newList = carriageList.map((item, _) => {\r\n            item.carriageOrder = carriageOrder\r\n            carriageOrder++\r\n            item.type = item.levelCar === 1 ? '豪华' : (item.levelCar === 2 ? '普通' : '经济')\r\n            item.seatNumber = item.seatCount\r\n            return item\r\n        })\r\n        this.setState({ dataSource: newList, carriageOrder })\r\n    }\r\n\r\n    render() {\r\n        let { showStatus, dataSource, carriages } = this.state\r\n        const components = {\r\n            body: {\r\n                row: EditableRow,\r\n                cell: EditableCell,\r\n            },\r\n        };\r\n        const columns = this.columns.map((col) => {\r\n            if (!col.editable) {\r\n                return col;\r\n            }\r\n\r\n            return {\r\n                ...col,\r\n                onCell: (record) => ({\r\n                    record,\r\n                    editable: col.editable,\r\n                    dataIndex: col.dataIndex,\r\n                    title: col.title,\r\n                    handleSave: this.handleSave,\r\n                }),\r\n            };\r\n        });\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Card\r\n                        title={<Divider orientation=\"left\" plain>\r\n                            <Button shape='round'>车厢信息</Button>\r\n                        </Divider>}\r\n                        size='small'\r\n                        extra={<Button onClick={this.handleAdd} icon={<PlusOutlined />} type=\"primary\" style={{ marginRight: '100px' }}></Button>}\r\n                    >\r\n                        <Table\r\n                            components={components}\r\n                            rowClassName={() => 'editable-row'}\r\n                            bordered\r\n                            dataSource={dataSource}\r\n                            columns={columns}\r\n                            rowKey=\"carriageOrder\"\r\n                            pagination={false}\r\n                        />\r\n                    </Card>\r\n                </div>\r\n                {/* 添加车厢信息的模态窗口 */}\r\n                <div>\r\n                    <Modal\r\n                        title=\"添加车厢信息\"\r\n                        visible={showStatus === 1}\r\n                        onOk={this.handleAdd}\r\n                        onCancel={this.handleCancel}\r\n                        footer={[]}\r\n                        width='800px'\r\n                        style={{ top: 100 }}\r\n                        destroyOnClose='true'\r\n                    >\r\n                        <Form\r\n                            layout=\"vertical\"\r\n                            onFinish={this.onFinish}\r\n                        >\r\n                            <Form.Item\r\n                                name=\"carriageId\"\r\n                                label=\"车厢\"\r\n                                rules={[{ required: true, message: '请选择车厢' }]}\r\n\r\n                            >\r\n                                <Select\r\n                                    showSearch\r\n                                    placeholder=\"可以搜索车厢编号\"\r\n                                    filterOption={(input, option) =>\r\n                                        option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                    }\r\n                                    onSelect={this.handleSelect}\r\n                                >\r\n                                    {carriages.map((item, _) => {\r\n                                        return <Option key={item.id} value={item.id}>{item.carriageNumber}</Option>\r\n                                    })}\r\n                                </Select>\r\n                            </Form.Item>\r\n\r\n                            <div\r\n                                style={{\r\n                                    textAlign: 'right',\r\n                                    marginTop: '50px'\r\n                                }}\r\n                            >\r\n                                <Space size=\"large\">\r\n                                    <Button onClick={this.handleCancel} style={{ marginRight: 8 }}>\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">\r\n                                        确认\r\n                                    </Button>\r\n                                </Space>\r\n\r\n                            </div>\r\n                        </Form>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\SiteInfo\\index.jsx",["203"],"import React, { Component } from 'react';\r\nimport { Card, Button, Table, Modal, Space, Form, Select, Popconfirm, Divider, message, Input } from 'antd'\r\nimport {\r\n    PlusOutlined\r\n} from '@ant-design/icons';\r\nimport LinkButton from '../../../../components/LinkButton';\r\nimport { getSiteList } from '../../../../api/dev/train';\r\n\r\n\r\nconst { Option } = Select\r\nexport default class SiteInfo extends Component {\r\n\r\n    state = {\r\n        showStatus: 0,\r\n        number: 1,\r\n        dataSource: [],\r\n        sites: [],\r\n        siteId: 0,\r\n    }\r\n\r\n    addSite = async () => {\r\n        // 调用接口拿数据\r\n        const result = await getSiteList()\r\n        if (result.code === 1) {\r\n            this.setState({ showStatus: 1, sites: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n\r\n    // 处理点击取消\r\n    handleCancel = () => {\r\n        this.setState({ showStatus: 0 })\r\n    }\r\n\r\n    // 表单提交\r\n    onFinish = (values) => {\r\n        const { dataSource, number, siteId } = this.state\r\n        const v = { number, ...values }\r\n        v.number = number\r\n        v.siteId = siteId\r\n        v.key = siteId\r\n        const newData = [...dataSource, v]\r\n        const { useTime } = values\r\n        const site = { siteId, useTime, number }\r\n        this.props.addSite(site)\r\n        this.setState({ showStatus: 0, dataSource: newData, number: number + 1 })\r\n    }\r\n\r\n    handleDelete = (number) => {\r\n        const dataSource = [...this.state.dataSource];\r\n        const newDataSource = dataSource.filter((item) => {\r\n            if (item.number !== number) {\r\n                if (item.number > number) {\r\n                    --item.number\r\n                }\r\n                return item\r\n            }\r\n        })\r\n        this.props.deleteSite(number)\r\n        if (newDataSource.length === 0) this.setState({ count: 1 })\r\n        this.setState({\r\n            dataSource: newDataSource,\r\n        });\r\n    }\r\n\r\n    // 处理选中站点\r\n    handleSelect = (_, value) => {\r\n        this.setState({ siteId: value.key })\r\n    }\r\n    componentDidMount() {\r\n        let { siteList } = this.props\r\n        if (!siteList) return\r\n        let { number } = this.state\r\n        const newList = siteList.map((item, _) => {\r\n            item.number = number\r\n            number++\r\n            item.useTime = item.timeConsume\r\n            return item\r\n        })\r\n        this.setState({ dataSource: newList, number })\r\n    }\r\n    render() {\r\n\r\n        let { showStatus, dataSource, sites } = this.state\r\n\r\n        const columns = [\r\n            {\r\n                title: '序号',\r\n                dataIndex: 'number',\r\n                key: '1',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '到达城市',\r\n                dataIndex: 'siteName',\r\n                key: '2',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '用时（分）',\r\n                dataIndex: 'useTime',\r\n                key: '3',\r\n                align: 'center',\r\n            }\r\n            ,\r\n            {\r\n                title: '操作',\r\n                key: '4',\r\n                align: 'center',\r\n                render: (_, record) =>\r\n                    this.state.dataSource.length >= 1 ? (\r\n                        <div>\r\n                            <Popconfirm title=\"确定删除吗\" onConfirm={() => this.handleDelete(record.number)}>\r\n                                <LinkButton >删除</LinkButton>\r\n                            </Popconfirm>\r\n                        </div>\r\n                    ) : null,\r\n            }\r\n        ];\r\n\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Card\r\n                        title={<Divider orientation=\"left\" plain>\r\n                            <Button shape='round'>站点信息</Button>\r\n                        </Divider>}\r\n                        size='small'\r\n                        extra={<Button onClick={this.addSite} icon={<PlusOutlined />} type=\"primary\" style={{ marginRight: '20px' }}></Button>}\r\n                    >\r\n                        <Table\r\n                            columns={columns}\r\n                            dataSource={dataSource}\r\n                            bordered\r\n                            rowKey=\"number\"\r\n                            pagination={false}\r\n                        />\r\n                    </Card>\r\n                </div>\r\n                {/* 添加车厢信息的模态窗口 */}\r\n                <div>\r\n                    <Modal\r\n                        title=\"添加车厢信息\"\r\n                        visible={showStatus === 1}\r\n                        onOk={this.handleAdd}\r\n                        onCancel={this.handleCancel}\r\n                        footer={[]}\r\n                        width='800px'\r\n                        style={{ top: 100 }}\r\n                        destroyOnClose='true'\r\n                    >\r\n                        <Form\r\n                            layout=\"vertical\"\r\n                            onFinish={this.onFinish}\r\n                        >\r\n                            <Form.Item\r\n                                name=\"siteName\"\r\n                                label=\"站点\"\r\n                                rules={[{ required: true, message: '请选择站点' }]}\r\n\r\n                            >\r\n                                <Select\r\n                                    showSearch\r\n                                    placeholder=\"可以搜索站点\"\r\n                                    filterOption={(input, option) =>\r\n                                        option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                    }\r\n                                    onSelect={this.handleSelect}\r\n                                >\r\n                                    {sites.map((item, _) => {\r\n                                        return <Option key={item.id} value={item.siteName}>{item.siteName}</Option>\r\n                                    })}\r\n                                </Select>\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                name=\"useTime\"\r\n                                label=\"用时\"\r\n                                rules={[{ required: true, message: '请输入用时' }]}\r\n\r\n                            >\r\n                                <Input placeholder=\"请输入用时\" />\r\n                            </Form.Item>\r\n                            <div\r\n                                style={{\r\n                                    textAlign: 'right',\r\n                                    marginTop: '50px'\r\n                                }}\r\n                            >\r\n                                <Space size=\"large\">\r\n                                    <Button onClick={this.handleCancel} style={{ marginRight: 8 }}>\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">\r\n                                        确认\r\n                                    </Button>\r\n                                </Space>\r\n\r\n                            </div>\r\n                        </Form>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Site\\index.jsx",["204"],"import React, { Component } from 'react'\r\nimport {\r\n    Input, List, Card, Pagination,\r\n    Drawer, Form, Button, Col, Row, Space, Select, message\r\n} from 'antd';\r\nimport {\r\n    PlusOutlined\r\n} from '@ant-design/icons';\r\nimport './site.css'\r\nimport { addSite, listSite } from '../../../api/dev/site'\r\n\r\nconst { Search } = Input\r\nconst { Option } = Select\r\n\r\nexport default class Site extends Component {\r\n\r\n    state = {\r\n        visible: false,\r\n        siteList: [],\r\n        curPage: 1,\r\n        totalCount: 0,\r\n        pageSize: 5\r\n    }\r\n\r\n    onSearch = (value) => {\r\n        const { curPage, pageSize } = this.state\r\n        this.getSiteList(curPage, pageSize, value)\r\n    }\r\n    // 打开抽屉\r\n    showDrawer = () => {\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    }\r\n    // 关闭抽屉\r\n    onClose = () => {\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n    }\r\n\r\n    onFinish = async (values) => {\r\n        this.setState({ visible: false })\r\n        const site = { ...values }\r\n        const result = await addSite(site)\r\n        if (result.code === 1) {\r\n            message.success('添加成功！')\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    // 组件挂载完毕的时候去拉数据库，获取站点列表\r\n    componentDidMount() {\r\n        const { curPage, pageSize } = this.state\r\n        this.getSiteList(curPage, pageSize)\r\n    }\r\n\r\n    async getSiteList(pageNum, pageSize, key) {\r\n        const result = await listSite(pageNum, pageSize,key)\r\n        if (result.code === 1) {\r\n            this.setState({\r\n                siteList: result.data,\r\n                totalCount: result.totalCount,\r\n                pageSize: result.pageSize\r\n            })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { siteList, totalCount, pageSize } = this.state\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <div>\r\n                        <Card\r\n                            title={<span style={{ fontSize: '30px' }}>车厢管理</span>}\r\n                            extra={<Button icon={<PlusOutlined />} type=\"primary\" onClick={this.showDrawer} >新增</Button>}\r\n                        >\r\n                            <Search style={{ width: '300px' }} placeholder=\"名称、首字母、简拼\" onSearch={this.onSearch} enterButton />\r\n                            <br />\r\n                            <br />\r\n                            <List\r\n                                className=\"site-list\"\r\n                                grid={{ gutter: 16, column: 4 }}\r\n                                pagination={{\r\n                                    onChange: page => {\r\n                                        this.getSiteList(page, pageSize)\r\n                                    },\r\n                                    pageSize: pageSize,\r\n                                    total: totalCount,\r\n                                }}\r\n                                dataSource={siteList}\r\n                                renderItem={item => (\r\n                                    <List.Item>\r\n                                        <Card style={{ textAlign: 'center' }}>{item.siteName}</Card>\r\n                                    </List.Item>\r\n                                )}\r\n\r\n                            />\r\n                        </Card>\r\n                    </div>\r\n                </div>\r\n                {/* 新增的抽屉 */}\r\n                <div>\r\n                    <Drawer\r\n                        title=\"新建站点\"\r\n                        width={550}\r\n                        onClose={this.onClose}\r\n                        visible={this.state.visible}\r\n                        bodyStyle={{ paddingBottom: 80 }}\r\n                    >\r\n                        <Form\r\n                            layout=\"vertical\"\r\n                            onFinish={this.onFinish}\r\n                        >\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"siteName\"\r\n                                        label=\"站点名称\"\r\n                                        rules={[{ required: true, message: '请输入站点名称' }]}\r\n                                        required=\"true\"\r\n                                    >\r\n                                        <Input placeholder=\"请输入站点名称\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"initials\"\r\n                                        label=\"首字母\"\r\n                                        rules={[{ required: true, message: '请输入首字母' }]}\r\n                                    >\r\n                                        <Select placeholder=\"请输入首字母\" >\r\n                                            <Option value=\"A\">A</Option>\r\n                                            <Option value=\"B\">B</Option>\r\n                                            <Option value=\"C\">C</Option>\r\n                                            <Option value=\"D\">D</Option>\r\n                                            <Option value=\"E\">E</Option>\r\n                                            <Option value=\"F\">F</Option>\r\n                                            <Option value=\"G\">G</Option>\r\n                                            <Option value=\"H\">H</Option>\r\n                                            <Option value=\"I\">I</Option>\r\n                                            <Option value=\"J\">J</Option>\r\n                                            <Option value=\"K\">K</Option>\r\n                                            <Option value=\"L\">L</Option>\r\n                                            <Option value=\"M\">M</Option>\r\n                                            <Option value=\"N\">N</Option>\r\n                                            <Option value=\"O\">O</Option>\r\n                                            <Option value=\"P\">P</Option>\r\n                                            <Option value=\"Q\">Q</Option>\r\n                                            <Option value=\"R\">R</Option>\r\n                                            <Option value=\"S\">S</Option>\r\n                                            <Option value=\"T\">T</Option>\r\n                                            <Option value=\"U\">U</Option>\r\n                                            <Option value=\"V\">V</Option>\r\n                                            <Option value=\"W\">W</Option>\r\n                                            <Option value=\"X\">X</Option>\r\n                                            <Option value=\"Y\">Y</Option>\r\n                                            <Option value=\"Z\">Z</Option>\r\n                                        </Select>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"abbreviation\"\r\n                                        label=\"简拼\"\r\n                                        rules={[{ required: true, message: '请输入简拼' }]}\r\n                                    >\r\n                                        <Input placeholder=\"请输入简拼\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"longitude\"\r\n                                        label=\"经度\"\r\n                                        rules={[{ required: true, message: '请输入经度' }]}\r\n                                    >\r\n                                        <Input placeholder=\"请输入经度\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"latitude\"\r\n                                        label=\"纬度\"\r\n                                        rules={[{ required: true, message: '请输入纬度' }]}\r\n                                    >\r\n                                        <Input placeholder=\"请输入纬度\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <div\r\n                                style={{\r\n                                    textAlign: 'right',\r\n                                    marginTop: '50px'\r\n                                }}\r\n                            >\r\n                                <Space size=\"large\">\r\n                                    <Button onClick={this.onClose} style={{ marginRight: 8 }}>\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">\r\n                                        确认\r\n                                    </Button>\r\n                                </Space>\r\n\r\n                            </div>\r\n                        </Form>\r\n                    </Drawer>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\User\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\User\\TicketList\\index.jsx",["205","206"],"import { Card, Table, Form, message, DatePicker, Button, Checkbox, Row, Col, Select, Modal, Layout } from 'antd'\r\nimport React, { Component } from 'react'\r\nimport moment from 'moment'\r\nimport LinkButton from '../../../components/LinkButton'\r\nimport './TicketList.css'\r\n\r\nimport { getSiteList } from '../../../api/dev/train';\r\nimport { moreTicket } from '../../../api/user/search';\r\nimport storageUtils from '../../../utils/storageUtils'\r\nimport { Link } from 'react-router-dom'\r\nimport { userLogout } from '../../../api/user/user'\r\n\r\nconst { Option } = Select\r\nconst format = \"YYYY-MM-DD\"\r\nconst { Header } = Layout\r\nexport default class TicketList extends Component {\r\n\r\n    state = {\r\n        dataSource: [],\r\n        siteList: [],\r\n        totalCount: 0,\r\n        pageSize: 5,\r\n    }\r\n    // 条件搜索\r\n    searchTicket = async (values) => {\r\n        let { startTime, startId, endId, types } = values\r\n        startTime = moment(startTime).format(format)\r\n        const result = await moreTicket(startId, endId, startTime, !types ? null : types.join(','))\r\n        if (result.code === 1) {\r\n            this.setState({\r\n                dataSource: result.data,\r\n                totalCount: result.totalCount,\r\n            })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    // 设置不能选择的日期\r\n    disabledDate = (current) => {\r\n        return current && current < moment().subtract(1, 'days')\r\n    }\r\n    async componentDidMount() {\r\n        this.setState({ dataSource: this.props.location.state })\r\n        const result = await getSiteList()\r\n        if (result.code === 1) {\r\n            this.setState({ siteList: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    checkLogin = (record) => {\r\n        const { dataSource } = this.state\r\n        const user = storageUtils.getUser()\r\n        if (!record.luxury && !record.ordinal && !record.enco) {\r\n            message.error('该车次没有余座了！')\r\n            return\r\n        }\r\n        if (Object.keys(user).length === 0) {\r\n            Modal.confirm({\r\n                content: '请先进行登录！',\r\n                onOk: async () => {\r\n                    this.props.history.push({ pathname: '/user/login', state: dataSource })\r\n                },\r\n                onCancel: () => {\r\n\r\n                }\r\n            })\r\n        } else {\r\n            const data = dataSource.find((item) => {\r\n                if (item.id === record.id) return item\r\n            })\r\n            this.props.history.push({ pathname: '/user/orderTicket', state: data })\r\n        }\r\n    }\r\n\r\n    logout = async () => {\r\n        const user = storageUtils.getUser()\r\n        storageUtils.removeUser()\r\n        storageUtils.removeUserToken()\r\n        const result = await userLogout(user.id)\r\n        if (result.code === 1) {\r\n            this.props.history.push({ pathname: '/user/login' })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { dataSource, siteList, totalCount, pageSize } = this.state\r\n        const user = storageUtils.getUser()\r\n        const columns = [\r\n            {\r\n                title: '车次',\r\n                dataIndex: 'trainNumber',\r\n                key: '1',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '起点站',\r\n                dataIndex: 'startName',\r\n                key: '2',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '终点站',\r\n                dataIndex: 'endName',\r\n                key: '3',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '出发日期',\r\n                dataIndex: 'startDate',\r\n                key: '4',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '出发时间',\r\n                key: '5',\r\n                dataIndex: 'startTime',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '到达时间',\r\n                key: '6',\r\n                dataIndex: 'endTime',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '历时',\r\n                key: '7',\r\n                dataIndex: 'timeConsume',\r\n                align: 'center',\r\n            },\r\n            ,\r\n            {\r\n                title: '豪华型',\r\n                key: '8',\r\n                dataIndex: 'luxury',\r\n                align: 'center',\r\n                render: (record) => {\r\n                    if (!record) {\r\n                        return \"-\"\r\n                    } else {\r\n                        return record\r\n                    }\r\n                }\r\n            },\r\n            ,\r\n            {\r\n                title: '普通',\r\n                key: '9',\r\n                dataIndex: 'ordinal',\r\n                align: 'center',\r\n                render: (record) => {\r\n                    if (!record) {\r\n                        return \"-\"\r\n                    } else {\r\n                        return record\r\n                    }\r\n                }\r\n            },\r\n            ,\r\n            {\r\n                title: '经济',\r\n                key: '10',\r\n                dataIndex: 'econ',\r\n                align: 'center',\r\n                render: (record) => {\r\n                    if (!record) {\r\n                        return \"-\"\r\n                    } else {\r\n                        return record\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                title: '操作',\r\n                key: '11',\r\n                render: (record) => (\r\n                    // <MyNavLink to=\"/user/orderTicket\">\r\n                    <LinkButton onClick={() => { this.checkLogin(record) }}>预定</LinkButton>\r\n                    // </MyNavLink>\r\n                ),\r\n                align: 'center'\r\n            },\r\n        ]\r\n\r\n        return (\r\n            <div>\r\n                <Header className=\"head\"><Link to=\"/user/ticketList\">订票系统</Link>\r\n                    <span style={{ marginLeft: '800px', fontSize: '15px' }}>\r\n                        {\r\n                            Object.keys(user).length === 0 ? <Link to=\"/user/login\" style={{ marginLeft: '20px' }}>登录</Link> : <Link to=\"/user/home/center\" style={{ marginLeft: '20px' }}>{user.phone}</Link>\r\n                        }\r\n                        {\r\n                            Object.keys(user).length === 0 ? null : <LinkButton onClick={this.logout} style={{ marginLeft: '20px' }}>退出</LinkButton>\r\n                        }\r\n                    </span>\r\n                </Header>\r\n                <div className=\"search-ticket\">\r\n                    <Form name=\"search-ticket\" layout=\"inline\" onFinish={this.searchTicket}>\r\n                        <Form.Item\r\n                            name=\"startId\"\r\n                        >\r\n                            <Select\r\n                                showSearch\r\n                                placeholder=\"起点\"\r\n                                filterOption={(input, option) =>\r\n                                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                }\r\n                            >\r\n                                {siteList.map((item, _) => {\r\n                                    return <Option key={item.id} value={item.id}>{item.siteName}</Option>\r\n                                })}\r\n                            </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            name=\"endId\"\r\n                        >\r\n                            <Select\r\n                                showSearch\r\n                                placeholder=\"终点\"\r\n                                filterOption={(input, option) =>\r\n                                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                }\r\n                            >\r\n                                {siteList.map((item, _) => {\r\n                                    return <Option key={item.id} value={item.id}>{item.siteName}</Option>\r\n                                })}\r\n                            </Select>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            name=\"startTime\"\r\n                        >\r\n                            <DatePicker\r\n                                format=\"YYYY-MM-DD\"\r\n                                disabledDate={this.disabledDate}\r\n                            />\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            name=\"types\"\r\n                            style={{ width: '150px' }}>\r\n\r\n                            <Checkbox.Group style={{ width: '100%' }} onChange={this.checkTrainType}>\r\n                                <Row>\r\n                                    <Col span={12}>\r\n                                        <Checkbox value={1}>动车D</Checkbox>\r\n                                    </Col>\r\n                                    <Col span={12}>\r\n                                        <Checkbox value={2}>高铁G</Checkbox>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Checkbox.Group>\r\n                        </Form.Item>\r\n                        <Form.Item >\r\n                            <Button\r\n                                shape=\"round\"\r\n                                style={{ width: '100px', marginLeft: '50px' }}\r\n                                type=\"primary\"\r\n                                htmlType=\"submit\"\r\n                            >\r\n                                查询\r\n                            </Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </div>\r\n\r\n                <Card\r\n                    bordered={false}\r\n                >\r\n                    <Table\r\n                        columns={columns}\r\n                        dataSource={dataSource}\r\n                        bordered\r\n                        rowKey=\"id\"\r\n                        pagination={{\r\n                            pageSize: pageSize,\r\n                            total: totalCount,\r\n                        }}\r\n                    />\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Search\\index.jsx",["207"],"import { Form, Input, Space, Button, Card, DatePicker, message, Select } from 'antd'\r\nimport React, { Component } from 'react'\r\nimport moment from 'moment';\r\nimport { getSiteList } from '../../../api/dev/train';\r\nimport { moreTicket } from '../../../api/user/search';\r\n\r\nconst { Option } = Select\r\nconst format = \"YYYY-MM-DD\"\r\nexport default class Search extends Component {\r\n\r\n    state = {\r\n        siteList: []\r\n    }\r\n\r\n    // 设置不可选中时间\r\n    disabledDate = (current) => {\r\n        return current && current < moment().subtract(1, 'days')\r\n    }\r\n\r\n    // 查询\r\n    onFinish = async (values) => {\r\n        let { startTime, startId, endId } = values\r\n        startTime = moment(startTime).format(format)\r\n        const result = await moreTicket(startId, endId, startTime)\r\n        if (result.code === 1) {\r\n            this.props.history.push({ pathname: \"/user/ticketList\", state: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const result = await getSiteList()\r\n        if (result.code === 1) {\r\n            this.setState({ siteList: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { siteList } = this.state\r\n        return (\r\n            <div>\r\n                <Card\r\n                    bordered={false}\r\n                >\r\n                    <Form\r\n                        layout=\"horizontal\"\r\n                        onFinish={this.onFinish}\r\n                        labelCol={{ span: 2 }}\r\n                        wrapperCol={{ span: 8 }}\r\n                        style={{ marginLeft: '200px', marginTop: '50px' }}\r\n                    >\r\n\r\n                        <Form.Item\r\n                            name=\"startId\"\r\n                            label=\"出发地\"\r\n                            rules={[{ required: true, message: '请输入出发地' }]}\r\n                            required=\"true\"\r\n                        >\r\n                            <Select\r\n                                showSearch\r\n                                placeholder=\"可以搜索站点\"\r\n                                filterOption={(input, option) =>\r\n                                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                }\r\n                            >\r\n                                {siteList.map((item, _) => {\r\n                                    return <Option key={item.id} value={item.id}>{item.siteName}</Option>\r\n                                })}\r\n                            </Select>\r\n                        </Form.Item>\r\n\r\n\r\n                        <Form.Item\r\n                            name=\"endId\"\r\n                            label=\"目的地\"\r\n                            rules={[{ required: true, message: '请输入目的地' }]}\r\n                        >\r\n                            <Select\r\n                                showSearch\r\n                                placeholder=\"可以搜索站点\"\r\n                                filterOption={(input, option) =>\r\n                                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                }\r\n                            >\r\n                                {siteList.map((item, _) => {\r\n                                    return <Option key={item.id} value={item.id}>{item.siteName}</Option>\r\n                                })}\r\n                            </Select>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            name=\"startTime\"\r\n                            label=\"出发日期\"\r\n                            rules={[{ required: true, message: '请选择出发日期' }]}\r\n                        >\r\n                            <DatePicker\r\n                                format=\"YYYY-MM-DD\"\r\n                                disabledDate={this.disabledDate}\r\n                            />\r\n                        </Form.Item>\r\n\r\n                        <div\r\n                            style={{\r\n                                textAlign: 'right',\r\n                                marginTop: '20px',\r\n                                marginRight: '650px'\r\n                            }}\r\n                        >\r\n                            <Space size=\"large\">\r\n                                <Button size=\"large\" shape=\"round\" htmlType=\"reset\" style={{ marginRight: 100 }}>\r\n                                    重置\r\n                                </Button>\r\n                                <Button size=\"large\" shape=\"round\" htmlType=\"submit\" type=\"primary\" style={{ marginRight: 350 }}>\r\n                                    查询\r\n                                </Button>\r\n                            </Space>\r\n                        </div>\r\n                    </Form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Register\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Home\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Login\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Login\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\User\\OrderTicket\\index.jsx",["208","209","210","211","212"],"import { Card, Divider, Table, Checkbox, Row, Col, Select, Drawer, Button, Layout, Modal, Form, Input, Space, message } from 'antd'\r\nimport React, { Component } from 'react'\r\nimport { createFromIconfontCN } from '@ant-design/icons';\r\nimport './OrderTicket.css'\r\nimport { getPassengerList } from '../../../api/user/user';\r\nimport storageUtils from '../../../utils/storageUtils'\r\nimport { toOrder } from '../../../api/user/order';\r\nimport LinkButton from '../../../components/LinkButton'\r\nimport { userLogout, addPassenger } from '../../../api/user/user'\r\nimport {\r\n    PlusOutlined\r\n} from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom'\r\nconst IconFont = createFromIconfontCN({\r\n    scriptUrl: '//at.alicdn.com/t/font_2779508_d3ob7o1ykpv.js',\r\n})\r\n\r\nconst { Option } = Select\r\nconst { Header, Content, Footer } = Layout\r\nexport default class OrderTicket extends Component {\r\n    myForm = React.createRef()\r\n    state = {\r\n        order: 1,\r\n        visible: false,\r\n        trainInfo: {},\r\n        passengerList: [],\r\n        dataSource: [],\r\n        select: 0,\r\n        showAdd: false\r\n    }\r\n    logout = async () => {\r\n        const user = storageUtils.getUser()\r\n        storageUtils.removeUser()\r\n        storageUtils.removeUserToken()\r\n        const result = await userLogout(user.id)\r\n        if (result.code === 1) {\r\n            this.props.history.push({ pathname: '/user/login' })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    // 删除乘客\r\n    deletePassenger = (key) => {\r\n        let { order } = this.state\r\n        const dataSource = [...this.state.dataSource]\r\n        const newDataSource = dataSource.filter((item) => {\r\n            if (item.id !== key) {\r\n                if (item.id > key) {\r\n                    // --item.id\r\n                    --item.order\r\n                }\r\n                return item\r\n            }\r\n        })\r\n        order--\r\n        if (newDataSource.length === 0) {\r\n            this.setState({ order: 1 })\r\n        }\r\n        this.setState({\r\n            dataSource: newDataSource,\r\n            order\r\n        })\r\n    }\r\n\r\n    // 处理选中乘客\r\n    handleCheck = (event) => {\r\n        const { dataSource, passengerList, order } = this.state\r\n        const { checked, value } = event.target\r\n        if (checked) {\r\n            let newData = passengerList.find((item) => {\r\n                if (item.id === value) return item\r\n            })\r\n            const newPassenger = { ...newData, order }\r\n            this.setState({\r\n                dataSource: [...dataSource, newPassenger],\r\n                order: order + 1,\r\n            })\r\n        } else {\r\n            this.deletePassenger(value)\r\n        }\r\n    }\r\n\r\n    // 处理对话框完成\r\n    handleOk = async () => {\r\n        // 为乘客生成订单\r\n        const user = storageUtils.getUser()\r\n        const { dataSource, trainInfo } = this.state\r\n        const { id, startId, endId, startDate, trainNumber, endDate, startName, endName, startTime, endTime } = trainInfo\r\n        const newData = dataSource.map((item) => {\r\n            const { id, levelCar, price } = item\r\n            const data = { id, levelCar, price }\r\n            return data\r\n        })\r\n        const json = { id, startId, endId, startDate, endDate, trainNumber, startName, endName, startTime, endTime, userId: user.id, passengerList: newData }\r\n        // console.log(json)\r\n        const result = await toOrder(json)\r\n        if (result.code === 1) {\r\n            const data = result.data.map((item) => {\r\n                dataSource.map((i) => {\r\n                    if (item.passengerId === i.id) {\r\n                        item.levelCar = i.levelCar === 1 ? '豪华' : (i.levelCar === 2 ? '普通' : '经济')\r\n                        item.price = i.price\r\n                    }\r\n                })\r\n                return item\r\n            })\r\n            const orderInfo = { startDate, trainNumber, startName, endName, startTime, endTime, passengerList: data }\r\n            this.setState({ visible: false })\r\n            this.props.history.push({ pathname: '/user/orderInfo', state: orderInfo })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n\r\n    // 关闭对话框\r\n    handleCancel = () => {\r\n        this.setState({ visible: false })\r\n    }\r\n\r\n    // 打开订单详情确认对话框\r\n    showOrderInfo = () => {\r\n        const { dataSource } = this.state\r\n        let flag = false\r\n        if (dataSource.length === 0) {\r\n            message.error('请选择乘车人！')\r\n            return\r\n        }\r\n        dataSource.map((item) => {\r\n            if (!item.levelCar) {\r\n                flag = true\r\n            }\r\n        })\r\n        if (flag) {\r\n            message.error('请选择座位类型！')\r\n            return\r\n        } else {\r\n            this.setState({ visible: true })\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        // 获取乘车人信息\r\n        const result = await getPassengerList(storageUtils.getUser().id)\r\n        if (result.code === 1) {\r\n            this.setState({\r\n                passengerList: result.data,\r\n                trainInfo: this.props.location.state\r\n            })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n\r\n    selectType = (value, record) => {\r\n        const { dataSource, trainInfo } = this.state\r\n        const newData = dataSource.map((item) => {\r\n            if (item.id === record.id) {\r\n                item.levelCar = value\r\n                item.price = value === 1 ? trainInfo.luxuryPrice : (value === 2 ? trainInfo.ordinalPrice : trainInfo.enco)\r\n            }\r\n            return item\r\n        })\r\n        this.setState({ dataSource: newData })\r\n    }\r\n\r\n    showAdd = () => {\r\n        this.setState({ showAdd: true })\r\n    }\r\n\r\n    // 添加用户\r\n    addPassenger = async (values) => {\r\n        const { name, idCard, phone } = values\r\n        const user = storageUtils.getUser()\r\n        const result = await addPassenger(phone, name, idCard, user.id)\r\n        if (result.code === 1) {\r\n            message.success('添加成功')\r\n            // 获取乘车人信息\r\n            const result = await getPassengerList(storageUtils.getUser().id)\r\n            if (result.code === 1) {\r\n                this.setState({\r\n                    passengerList: result.data,\r\n                    trainInfo: this.props.location.state\r\n                })\r\n            } else {\r\n                message.error(result.msg)\r\n            }\r\n            this.setState({ showAdd: false })\r\n            this.myForm.current.resetFields()\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    handleAddClose = () => {\r\n        this.setState({ showAdd: false })\r\n    }\r\n\r\n    render() {\r\n        const { passengerList, visible, trainInfo, dataSource, showAdd } = this.state\r\n        const user = storageUtils.getUser()\r\n        const columns = [\r\n            {\r\n                title: '序号',\r\n                dataIndex: 'order',\r\n                key: '1',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '席别',\r\n                dataIndex: 'level',\r\n                key: '2',\r\n                align: 'center',\r\n                render: (_, record) => (\r\n                    <Select style={{ width: 100 }} onChange={(value) => { this.selectType(value, record) }}>\r\n                        {\r\n                            trainInfo.luxury ? <Option value={1}>豪华</Option> : null\r\n                        }\r\n                        {\r\n                            trainInfo.ordinal ? <Option value={2}>普通</Option> : null\r\n                        }\r\n                        {\r\n                            trainInfo.enco ? <Option value={3}>经济</Option> : null\r\n                        }\r\n                    </Select>\r\n                ),\r\n\r\n            },\r\n            {\r\n                title: '姓名',\r\n                dataIndex: 'passengerName',\r\n                key: '3',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '证件号码',\r\n                key: '4',\r\n                dataIndex: 'passengerCard',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '手机号码',\r\n                key: '5',\r\n                dataIndex: 'passengerPhone',\r\n                align: 'center',\r\n            },\r\n        ];\r\n\r\n        const columnsInfo = [\r\n            {\r\n                title: '序号',\r\n                dataIndex: 'order',\r\n                key: '1',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '席别',\r\n                dataIndex: 'levelCar',\r\n                key: '2',\r\n                align: 'center',\r\n                render: (value) => {\r\n                    return value === 1 ? '豪华' : (value === 2 ? '普通' : '经济')\r\n                }\r\n            },\r\n            {\r\n                title: '姓名',\r\n                dataIndex: 'passengerName',\r\n                key: '3',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '证件号码',\r\n                key: '4',\r\n                dataIndex: 'passengerCard',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '手机号码',\r\n                key: '5',\r\n                dataIndex: 'passengerPhone',\r\n                align: 'center',\r\n            },\r\n        ];\r\n\r\n        return (\r\n            <div>\r\n                <Header className=\"head\"><Link to=\"/user/ticketList\">订票系统</Link>\r\n                    <span style={{ marginLeft: '800px', fontSize: '15px' }}>\r\n                        {\r\n                            Object.keys(user).length === 0 ? <Link to=\"/user/login\" style={{ marginLeft: '20px' }}>登录</Link> : <Link to=\"/user/home/center\" style={{ marginLeft: '20px' }}>{user.phone}</Link>\r\n                        }\r\n                        {\r\n                            Object.keys(user).length === 0 ? null : <LinkButton onClick={this.logout} style={{ marginLeft: '20px' }}>退出</LinkButton>\r\n                        }\r\n                    </span>\r\n                </Header>\r\n                {\r\n                    Object.keys(trainInfo).length !== 0 ?\r\n                        <Layout>\r\n                            <Header style={{ height: '250px', backgroundColor: '#fff' }}>\r\n                                <div className=\"order-trian-info\">\r\n                                    <Card\r\n                                        title=\"列车信息\"\r\n                                        headStyle={{ backgroundColor: '#3B99FC' }}\r\n                                        bodyStyle={{ backgroundColor: '#EEF1F8' }}\r\n                                    >\r\n                                        <p className=\"order-train-info-p\">\r\n                                            <strong className=\"order-train-info-mr5\">{trainInfo.startDate}</strong>\r\n                                            <strong className=\"order-train-info-ml5\">{trainInfo.trainNumber}</strong>\r\n                                            次\r\n                                            <strong className=\"order-train-info-ml5\">{trainInfo.startName}</strong>\r\n                                            站\r\n                                            <strong className=\"order-train-info-s\">（{trainInfo.startTime}开）——{trainInfo.endName}</strong>\r\n                                            站（{trainInfo.endTime}到）\r\n                                        </p>\r\n                                        <p>\r\n                                            {\r\n                                                trainInfo.luxury ?\r\n                                                    <span>豪华（\r\n                                                        <span style={{ color: '#fb7403' }}>￥{trainInfo.luxuryPrice}</span>\r\n                                                        ）{trainInfo.luxury} 张\r\n                                                    </span> : null\r\n                                            }\r\n                                            {\r\n                                                trainInfo.ordinal ? <span style={{ marginLeft: '50px' }}>普通（\r\n                                                    <span style={{ color: '#fb7403' }}>￥{trainInfo.ordinalPrice}</span>\r\n                                                    ）{trainInfo.ordinal} 张\r\n                                                </span> : null\r\n                                            }\r\n                                            {\r\n                                                trainInfo.enco ? <span style={{ marginLeft: '50px' }}>经济（\r\n                                                    <span style={{ color: '#fb7403' }}>￥{trainInfo.encoPrice}</span>\r\n                                                    ）{!trainInfo.enco} 张\r\n                                                </span> : null\r\n                                            }\r\n                                        </p>\r\n                                    </Card>\r\n                                </div>\r\n                            </Header>\r\n                            <Content style={{ height: '450px', backgroundColor: '#fff' }}>\r\n                                <div className=\"order-passenger-info\">\r\n                                    <Card\r\n                                        title=\"乘客信息\"\r\n                                        headStyle={{ backgroundColor: '#3B99FC' }}\r\n                                        bodyStyle={{ backgroundColor: '#FFFFFF' }}\r\n                                    >\r\n                                        <div>\r\n                                            <span>\r\n                                                <IconFont type=\"anticonchengcheren\" />\r\n                                                <span style={{ marginLeft: '10px' }}>乘车人</span>\r\n                                            </span>\r\n                                            <span style={{ marginLeft: 1000 }}>\r\n                                                <Button icon={<PlusOutlined />} type=\"primary\" size='small' onClick={this.showAdd} >添加</Button>\r\n                                            </span>\r\n                                        </div>\r\n                                        <div>\r\n                                            <Checkbox.Group style={{ width: '100%', marginLeft: '25px' }} >\r\n                                                <Row>\r\n                                                    {\r\n                                                        passengerList.map((item) => {\r\n                                                            return (\r\n                                                                <Col key={item.id} span={2}>\r\n                                                                    <Checkbox onChange={this.handleCheck} key={item.id} value={item.id}>{item.passengerName}</Checkbox>\r\n                                                                </Col>\r\n                                                            )\r\n                                                        })\r\n                                                    }\r\n                                                </Row>\r\n                                            </Checkbox.Group>\r\n                                        </div>\r\n                                        <Divider dashed />\r\n                                        <Table\r\n                                            columns={columns}\r\n                                            dataSource={dataSource}\r\n                                            bordered\r\n                                            rowKey=\"order\"\r\n                                            pagination={false}\r\n                                        />\r\n                                    </Card>\r\n                                </div>\r\n                            </Content>\r\n                        </Layout> : null\r\n                }\r\n                <Footer style={{ backgroundColor: '#fff' }}>\r\n                    <Button onClick={this.showOrderInfo} type=\"primary\" size=\"large\" shape=\"round\" style={{ marginLeft: '600px' }}>提交订单</Button>\r\n                </Footer>\r\n                {/* 确认订单信息对话框 */}\r\n                <div>\r\n                    <Modal\r\n                        title=\"核对一下信息\"\r\n                        visible={visible}\r\n                        onOk={this.handleOk}\r\n                        onCancel={this.handleCancel}\r\n                        cancelText=\"返回修改\"\r\n                        destroyOnClose\r\n                        width='800px'\r\n                    >\r\n                        <p className=\"order-train-info-p\">\r\n                            <strong className=\"order-train-info-mr5\">{trainInfo.startDate}</strong>\r\n                            <strong className=\"order-train-info-ml5\">{trainInfo.trainNumber}</strong>\r\n                            次\r\n                            <strong className=\"order-train-info-ml5\">{trainInfo.startName}</strong>\r\n                            站\r\n                            <strong className=\"order-train-info-s\">（{trainInfo.startTime}开）——{trainInfo.endName}</strong>\r\n                            站（{trainInfo.endTime}到）\r\n                        </p>\r\n                        <Table\r\n                            columns={columnsInfo}\r\n                            dataSource={dataSource}\r\n                            bordered\r\n                            rowKey=\"order\"\r\n                            pagination={false}\r\n                        />\r\n                    </Modal>\r\n                </div>\r\n                <div>\r\n                    <Modal\r\n                        title=\"添加乘车人\"\r\n                        visible={showAdd}\r\n                        onOk={this.addPassenger}\r\n                        onCancel={this.handleAddClose}\r\n                        footer={[]}\r\n                        width='800px'\r\n                        style={{ top: 100 }}\r\n                        destroyOnClose='true'\r\n                    >\r\n                        <Form\r\n                            layout=\"vertical\"\r\n                            onFinish={this.addPassenger}\r\n                            ref={this.myForm}\r\n                        >\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"name\"\r\n                                        label=\"姓名\"\r\n                                        rules={[{ required: true, message: '请输入姓名!' }]}\r\n                                    >\r\n                                        <Input autoComplete=\"off\" placeholder=\"请输入姓名\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"idCard\"\r\n                                        label=\"身份证\"\r\n                                        rules={[{ required: true, message: '请输入身份证!' }]}\r\n                                    >\r\n                                        <Input maxLength={18} autoComplete=\"off\" placeholder=\"请输入身份证\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"phone\"\r\n                                        label=\"手机号码\"\r\n                                        rules={[{ required: true, message: '请输入手机号码!' }]}\r\n                                        required=\"true\"\r\n                                    >\r\n                                        <Input maxLength={11} autoComplete=\"off\" placeholder=\"请输入手机号码\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <div\r\n                                style={{\r\n                                    textAlign: 'right',\r\n                                    marginTop: '50px'\r\n                                }}\r\n                            >\r\n                                <Space size=\"large\">\r\n                                    <Button onClick={this.handleAddClose} style={{ marginRight: 8 }}>\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">\r\n                                        确认\r\n                                    </Button>\r\n                                </Space>\r\n\r\n                            </div>\r\n                        </Form>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\OrderInfo\\index.jsx",["213","214","215"],"import React, { Component } from 'react'\r\nimport { Card, Divider, Table, Statistic, Row, Col, Select, Layout, Button, message } from 'antd'\r\nimport { cancelOrder, payment } from '../../../api/user/order';\r\nimport storageUtils from '../../../utils/storageUtils'\r\nimport { Link } from 'react-router-dom'\r\nimport LinkButton from '../../../components/LinkButton'\r\nimport { userLogout } from '../../../api/user/user'\r\nconst { Header } = Layout\r\nconst { Countdown } = Statistic\r\nconst deadline = Date.now() + 1000 * 60 * 30\r\nexport default class OrderInfo extends Component {\r\n\r\n    state = {\r\n        dataSource: [],\r\n        order: 1,\r\n        trainInfo: {}\r\n    }\r\n\r\n    onFinish = () => {\r\n        cancelOrder()\r\n    }\r\n\r\n    componentDidMount() {\r\n        let { order } = this.state\r\n        const { endName, endTime, startDate, startName, startTime, trainNumber, passengerList } = this.props.history.location.state\r\n        const newData = passengerList.map((item) => {\r\n            item.order = order\r\n            order++\r\n            return item\r\n        })\r\n        this.setState({\r\n            trainInfo: { endName, endTime, startDate, startName, startTime, trainNumber },\r\n            dataSource: newData\r\n        })\r\n    }\r\n\r\n    cancelOrder = async () => {\r\n        const { dataSource } = this.state\r\n        const orderIds = dataSource.map((item) => {\r\n            return item.orderId\r\n        })\r\n        // 取消订单\r\n        const result = await cancelOrder(orderIds)\r\n        if (result.code === 1) {\r\n            message.success('取消成功')\r\n            const { data } = result\r\n            const orderNumbers = { isSuccess: 2, data }\r\n            this.props.history.push({ pathname: '/user/orderComplete', state: orderNumbers })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    onlinePayment = async () => {\r\n        const { dataSource } = this.state\r\n        const orderIds = dataSource.map((item) => {\r\n            return item.orderId\r\n        })\r\n        // 支付\r\n        const result = await payment(orderIds)\r\n        if (result.code === 1) {\r\n            message.success('支付成功')\r\n            const { data } = result\r\n            const orderNumbers = { isSuccess: 1, data }\r\n            this.props.history.push({ pathname: '/user/orderComplete', state: orderNumbers })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n    logout = async () => {\r\n        const user = storageUtils.getUser()\r\n        storageUtils.removeUser()\r\n        storageUtils.removeUserToken()\r\n        const result = await userLogout(user.id)\r\n        if (result.code === 1) {\r\n            this.props.history.push({ pathname: '/user/login' })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n    render() {\r\n\r\n        const { dataSource, trainInfo } = this.state\r\n        const user = storageUtils.getUser()\r\n        const columns = [\r\n            {\r\n                title: '序号',\r\n                dataIndex: 'order',\r\n                key: '1',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '姓名',\r\n                dataIndex: 'name',\r\n                key: '2',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '证件号码',\r\n                key: '4',\r\n                dataIndex: 'idCard',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '席别',\r\n                dataIndex: 'levelCar',\r\n                key: '4',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '车厢',\r\n                key: '5',\r\n                dataIndex: 'carriageOrder',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '席位号',\r\n                key: '6',\r\n                dataIndex: 'seatNumber',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '票价（元）',\r\n                key: '7',\r\n                dataIndex: 'price',\r\n                align: 'center',\r\n            },\r\n        ];\r\n\r\n        return (\r\n            <div>\r\n                <Header className=\"head\"><Link to=\"/user/ticketList\">订票系统</Link>\r\n                    <span style={{ marginLeft: '800px', fontSize: '15px' }}>\r\n                        {\r\n                            Object.keys(user).length === 0 ? <Link to=\"/user/login\" style={{ marginLeft: '20px' }}>登录</Link> : <Link to=\"/user/home/center\" style={{ marginLeft: '20px' }}>{user.phone}</Link>\r\n                        }\r\n                        {\r\n                            Object.keys(user).length === 0 ? null : <LinkButton onClick={this.logout} style={{ marginLeft: '20px' }}>退出</LinkButton>\r\n                        }\r\n                    </span>\r\n                </Header>\r\n                <Layout style={{ backgroundColor: '#fff' }}>\r\n                    {/* <Header style={{ backgroundColor: '#fff'}}> */}\r\n                    <h1 style={{\r\n                        border: 'solid 1px #298CCE',\r\n                        width: '1000px',\r\n                        height: '80px',\r\n                        marginTop: '50px',\r\n                        marginLeft: '400px',\r\n                        textAlign: 'center',\r\n                        lineHeight: '80px'\r\n                    }}>\r\n                        <div>\r\n                            席位已锁定，请在\r\n                            <span style={{ color: '#fb7403' }}>30</span>\r\n                            分钟内进行支付，完成订票。支付剩余时间：\r\n                            <Countdown\r\n                                valueStyle={{ color: '#fb7403' }}\r\n                                style={{ marginLeft: '655px', marginTop: '-59px' }}\r\n                                value={deadline} onFinish={this.onFinish}\r\n                                format='mm:ss' />\r\n                        </div>\r\n                    </h1>\r\n\r\n\r\n                    {/* </Header> */}\r\n                    {/* <Content style={{marginTop:'100px',backgroundColor:'#fff',height:'1000px'}}> */}\r\n                    <Card\r\n                        style={{ marginTop: '25px' }}\r\n                        title=\"订单信息\"\r\n                        headStyle={{ backgroundColor: '#3B99FC', width: '1000px', marginLeft: '400px', marginTop: '50px' }}\r\n                        bodyStyle={{ backgroundColor: '#FFFFFF', width: '1000px', marginLeft: '400px' }}\r\n                        bordered={false}\r\n                    >\r\n                        <div>\r\n                            <p className=\"order-train-info-p\">\r\n                                <strong className=\"order-train-info-mr5\">{trainInfo.startDate}</strong>\r\n                                <strong className=\"order-train-info-ml5\">{trainInfo.trainNumber}</strong>\r\n                                次\r\n                                <strong className=\"order-train-info-ml5\">{trainInfo.startName}</strong>\r\n                                站\r\n                                <strong className=\"order-train-info-s\">（{trainInfo.startTime}开）——{trainInfo.endName}</strong>\r\n                                站（{trainInfo.endTime}到）\r\n                            </p>\r\n                        </div>\r\n                        <Divider dashed />\r\n                        <Table\r\n                            columns={columns}\r\n                            dataSource={dataSource}\r\n                            bordered\r\n                            rowKey=\"passengerId\"\r\n                            pagination={false}\r\n                        />\r\n                    </Card>\r\n                    {/* </Content> */}\r\n                    <div>\r\n                        <Button onClick={this.cancelOrder} shape=\"round\" style={{ marginLeft: '750px' }}>取消订单</Button>\r\n                        {/* <MyNavLink to=\"/user/orderComplete\"> */}\r\n                        <Button onClick={this.onlinePayment} shape=\"round\" style={{ backgroundColor: '#FF8000', marginLeft: '200px', marginTop: '50px', color: '#fff' }}>网上支付</Button>\r\n                        {/* </MyNavLink> */}\r\n                    </div>\r\n                </Layout>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Complete\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Center\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\components\\DevLeftNav\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\components\\UserLeftNav\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Home\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\User\\MyOrder\\index.jsx",["216"],"import React, { Component } from 'react'\r\nimport moment from 'moment';\r\nimport {\r\n    Input, Table, Card, Form, Button, Col, Row, Select, DatePicker, message\r\n} from 'antd'\r\nimport { Link } from 'react-router-dom'\r\nimport storageUtils from '../../../utils/storageUtils'\r\nimport { getMyOrderList } from '../../../api/user/user';\r\n\r\nconst { Option } = Select\r\nconst { RangePicker } = DatePicker\r\nconst format = \"YYYY-MM-DD\"\r\nexport default class MyOrder extends Component {\r\n    state = {\r\n        pageNum: 1,\r\n        pageSize: 5,\r\n        dataSource: [],\r\n        totalCount: 0\r\n    }\r\n    async componentDidMount() {\r\n        const { pageNum, pageSize } = this.state\r\n        this.getMyOrderList(pageNum, pageSize)\r\n    }\r\n\r\n    async getMyOrderList(pageNum, pageSize, startDate, endDate, type, orderState) {\r\n        const user = storageUtils.getUser()\r\n        const result = await getMyOrderList(user.id, pageNum, pageSize, startDate, endDate, type, orderState)\r\n        if (result.code === 1) {\r\n            this.setState({ dataSource: result.data, totalCount: result.totalCount })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    search = (values) => {\r\n        const { orderState, type, date } = values\r\n        let startDate\r\n        let endDate\r\n        if (date) {\r\n            startDate = moment(date[0]).format(format)\r\n            endDate = moment(date[1]).format(format)\r\n        }\r\n        const { pageNum, pageSize } = this.state\r\n        this.getMyOrderList(pageNum, pageSize, startDate, endDate, type, orderState)\r\n    }\r\n\r\n    render() {\r\n        const { dataSource, pageSize, totalCount } = this.state\r\n        const user = storageUtils.getUser()\r\n        const columns = [\r\n            {\r\n                title: '车次',\r\n                key: '1',\r\n                dataIndex: 'trainNumber',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '始发地',\r\n                dataIndex: 'startName',\r\n                key: '2',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '终点站',\r\n                dataIndex: 'endName',\r\n                key: '3',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '出发时间',\r\n                dataIndex: 'startDateTime',\r\n                key: '4',\r\n                align: 'center',\r\n                render: (_, record) => {\r\n                    return record.startDate + \" \" + record.startTime\r\n                }\r\n            },\r\n            {\r\n                title: '到达时间',\r\n                dataIndex: 'endDateTime',\r\n                key: '5',\r\n                align: 'center',\r\n                render: (_, record) => {\r\n                    return record.endDate + \" \" + record.endTime\r\n                }\r\n            },\r\n            {\r\n                title: '级别',\r\n                key: '6',\r\n                dataIndex: 'levelCar',\r\n                align: 'center',\r\n                render: (record) => {\r\n                    return record === 1 ? '豪华' : (record === 2 ? '普通' : '经济')\r\n                }\r\n            },\r\n            {\r\n                title: '车厢',\r\n                key: '7',\r\n                dataIndex: 'carriageOrder',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '座位号',\r\n                key: '8',\r\n                dataIndex: 'seatNumber',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '乘车人',\r\n                key: '9',\r\n                dataIndex: 'passengerName',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '身份证',\r\n                key: '10',\r\n                dataIndex: 'passengerCard',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '订单状态',\r\n                key: '11',\r\n                dataIndex: 'orderStatus',\r\n                align: 'center',\r\n                render: (record) => {\r\n                    return record === 0 ? '未支付' : (record === 1 ? '已支付' : '已取消')\r\n                }\r\n            },\r\n        ]\r\n        return (\r\n            <div>\r\n                <div>\r\n                    {\r\n                        Object.keys(user).length === 0 ?\r\n                            <span>请先<Link to=\"/user/login\">登录</Link></span> :\r\n                            <Card>\r\n                                <div>\r\n                                    <Form\r\n                                        layout=\"inline\"\r\n                                        onFinish={this.search}\r\n                                    >\r\n                                        <Row gutter={16}>\r\n                                            <Col span={12}>\r\n                                                <Form.Item\r\n                                                    name=\"date\"\r\n                                                >\r\n                                                    <RangePicker />\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                            <Col span={6}>\r\n                                                <Form.Item\r\n                                                    name=\"type\"\r\n                                                >\r\n                                                    <Select placeholder=\"座位类别\">\r\n                                                        <Option value={1}>豪华</Option>\r\n                                                        <Option value={2}>普通</Option>\r\n                                                        <Option value={3}>经济</Option>\r\n                                                    </Select>\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                            <Col span={6}>\r\n                                                <Form.Item\r\n                                                    name=\"orderState\"\r\n                                                >\r\n                                                    <Select placeholder=\"订单状态\">\r\n                                                        <Option value={1}>已支付</Option>\r\n                                                        <Option value={0}>未支付</Option>\r\n                                                        <Option value={2}>超时取消</Option>\r\n                                                    </Select>\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                        </Row>\r\n\r\n                                        <Col span={0.3}\r\n                                            style={{ marginRight: '20px' }}\r\n                                        >\r\n                                            <Form.Item>\r\n                                                <Button type=\"primary\" htmlType='submit' shape=\"round\" >查询</Button>\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                        <Col span={1}\r\n                                        >\r\n                                            <Form.Item>\r\n                                                <Button shape=\"round\" htmlType='reset' >重置</Button>\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                    </Form>\r\n                                </div>\r\n                                {\r\n                                    dataSource.length === 0 ? null : <div style={{ marginTop: '20px' }}>\r\n                                        <Table\r\n                                            columns={columns}\r\n                                            dataSource={dataSource}\r\n                                            bordered\r\n                                            rowKey=\"id\"\r\n                                            pagination={{\r\n                                                onChange: page => {\r\n                                                    this.getMyOrderList(page, pageSize)\r\n                                                },\r\n                                                pageSize: pageSize,\r\n                                                total: totalCount,\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                            </Card>\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\pages\\User\\Passenger\\index.jsx",["217","218"],"import React, { Component } from 'react'\r\nimport {\r\n    Input, Card, Table,\r\n    Drawer, Form, Button, Col, Row, Space, message, Radio, Popconfirm\r\n} from 'antd';\r\nimport {\r\n    PlusOutlined\r\n} from '@ant-design/icons';\r\nimport LinkButton from '../../../components/LinkButton';\r\nimport { addPassenger, deletePassenger, editPassenger, getPassengerList } from '../../../api/user/user';\r\nimport storageUtils from '../../../utils/storageUtils'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default class PlatForm extends Component {\r\n    myForm = React.createRef()\r\n    state = {\r\n        totalCount: 0,\r\n        showStatus: 0,\r\n        count: 0,\r\n        dataSource: [],\r\n        passengerInfo: {}\r\n    }\r\n\r\n    // 打开添加抽屉\r\n    showAddUser = () => {\r\n        this.setState({ visible: 1 })\r\n    }\r\n\r\n    // 关闭抽屉\r\n    onClose = () => {\r\n        this.setState({ visible: 0 })\r\n        this.myForm.current.resetFields()\r\n    }\r\n\r\n    // 添加用户\r\n    addPassenger = async (values) => {\r\n        const { name, idCard, phone } = values\r\n        const user = storageUtils.getUser()\r\n        const result = await addPassenger(phone, name, idCard, user.id)\r\n        if (result.code === 1) {\r\n            message.success('添加成功')\r\n            this.getPassengerList()\r\n            this.setState({ visible: 0 })\r\n            this.myForm.current.resetFields()\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n\r\n    // 打开编辑的抽屉\r\n    showUpdateUser = (record) => {\r\n        this.setState({ visible: 2, passengerInfo: record })\r\n    }\r\n\r\n    updateUser = async (values) => {\r\n        const { phone, name, idCard, id } = values\r\n        const user = storageUtils.getUser()\r\n        const result = await editPassenger(phone, name, idCard, id)\r\n        if (result.code === 1) {\r\n            message.success('编辑成功')\r\n            this.getPassengerList()\r\n            this.setState({ visible: 0 })\r\n            this.myForm.current.resetFields()\r\n        }\r\n\r\n    }\r\n\r\n    handleDelete = async (id) => {\r\n        const result = await deletePassenger(id)\r\n        if (result.code === 1) {\r\n            message.success('删除成功')\r\n            this.getPassengerList()\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getPassengerList()\r\n    }\r\n\r\n    async getPassengerList() {\r\n        const user = storageUtils.getUser()\r\n        if (Object.keys(user).length === 0) return\r\n        const result = await getPassengerList(user.id)\r\n        if (result.code === 1) {\r\n            this.setState({ dataSource: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const { visible, dataSource, passengerInfo, pageSize, totalCount } = this.state\r\n        const user = storageUtils.getUser()\r\n        const columns = [\r\n            {\r\n                title: '姓名',\r\n                dataIndex: 'passengerName',\r\n                key: '1',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '身份证',\r\n                dataIndex: 'passengerCard',\r\n                key: '2',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '手机号码',\r\n                dataIndex: 'passengerPhone',\r\n                key: '3',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '操作',\r\n                key: '4',\r\n                render: (_, record) => (\r\n                    <Space size=\"middle\">\r\n                        <LinkButton onClick={() => { this.showUpdateUser(record) }}>编辑</LinkButton>\r\n                        <Popconfirm title=\"确定删除吗\" onConfirm={() => this.handleDelete(record.id)}>\r\n                            <LinkButton >删除</LinkButton>\r\n                        </Popconfirm>\r\n                    </Space>\r\n                ),\r\n                align: 'center'\r\n            },\r\n        ]\r\n        return (\r\n            <div>\r\n                {\r\n                    Object.keys(user).length === 0 ?\r\n                        <span>请先<Link to=\"/user/login\">登录</Link></span> :\r\n                        <div>\r\n                            <div>\r\n                                <Card\r\n                                    extra={\r\n                                        <Button icon={<PlusOutlined />} type=\"primary\" onClick={this.showAddUser}>新增</Button>\r\n                                    }\r\n                                >\r\n                                    <Table\r\n                                        columns={columns}\r\n                                        dataSource={dataSource}\r\n                                        bordered\r\n                                        rowKey=\"id\"\r\n                                        pagination={{\r\n                                            pageSize: pageSize,\r\n                                            total: totalCount,\r\n                                        }}\r\n                                    />\r\n                                </Card>\r\n                            </div>\r\n                            {/* 新增的抽屉 */}\r\n                            <div>\r\n                                <Drawer\r\n                                    title=\"新增用户\"\r\n                                    width={500}\r\n                                    onClose={this.onClose}\r\n                                    visible={visible === 1}\r\n                                    bodyStyle={{ paddingBottom: 80 }}\r\n                                >\r\n                                    <Form\r\n                                        layout=\"vertical\"\r\n                                        onFinish={this.addPassenger}\r\n                                        ref={this.myForm}\r\n                                    >\r\n                                        <Row gutter={16}>\r\n                                            <Col span={12}>\r\n                                                <Form.Item\r\n                                                    name=\"name\"\r\n                                                    label=\"姓名\"\r\n                                                    rules={[{ required: true, message: '请输入姓名!' }]}\r\n                                                >\r\n                                                    <Input autoComplete=\"off\" placeholder=\"请输入姓名\" />\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <Row gutter={16}>\r\n                                            <Col span={12}>\r\n                                                <Form.Item\r\n                                                    name=\"idCard\"\r\n                                                    label=\"身份证\"\r\n                                                    rules={[{ required: true, message: '请输入身份证!' }]}\r\n                                                >\r\n                                                    <Input maxLength={18} autoComplete=\"off\" placeholder=\"请输入身份证\" />\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <Row gutter={16}>\r\n                                            <Col span={12}>\r\n                                                <Form.Item\r\n                                                    name=\"phone\"\r\n                                                    label=\"手机号码\"\r\n                                                    rules={[{ required: true, message: '请输入手机号码!' }]}\r\n                                                    required=\"true\"\r\n                                                >\r\n                                                    <Input maxLength={11} autoComplete=\"off\" placeholder=\"请输入手机号码\" />\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <div\r\n                                            style={{\r\n                                                textAlign: 'right',\r\n                                                marginTop: '50px'\r\n                                            }}\r\n                                        >\r\n                                            <Space size=\"large\">\r\n                                                <Button onClick={this.onClose} style={{ marginRight: 8 }}>\r\n                                                    取消\r\n                                                </Button>\r\n                                                <Button type=\"primary\" htmlType=\"submit\">\r\n                                                    确认\r\n                                                </Button>\r\n                                            </Space>\r\n\r\n                                        </div>\r\n                                    </Form>\r\n                                </Drawer>\r\n                            </div>\r\n                            {/* 编辑的抽屉 */}\r\n                            <div>\r\n                                <Drawer\r\n                                    title=\"编辑用户\"\r\n                                    width={500}\r\n                                    onClose={this.onClose}\r\n                                    visible={visible === 2}\r\n                                    bodyStyle={{ paddingBottom: 80 }}\r\n                                >\r\n                                    <Form\r\n                                        layout=\"vertical\"\r\n                                        onFinish={this.updateUser}\r\n                                        ref={this.myForm}\r\n                                    >\r\n                                        <Row gutter={16}>\r\n                                            <Col span={12}>\r\n                                                <Form.Item\r\n                                                    name=\"name\"\r\n                                                    label=\"姓名\"\r\n                                                    rules={[{ required: true, message: '请输入姓名!' }]}\r\n                                                    initialValue={passengerInfo.passengerName}\r\n                                                >\r\n                                                    <Input autoComplete=\"off\" placeholder=\"请输入姓名\" />\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <Row gutter={16}>\r\n                                            <Col span={12}>\r\n                                                <Form.Item\r\n                                                    name=\"idCard\"\r\n                                                    label=\"身份证\"\r\n                                                    rules={[{ required: true, message: '请输入身份证!' }]}\r\n                                                    initialValue={passengerInfo.passengerCard}\r\n                                                >\r\n                                                    <Input maxLength={18} autoComplete=\"off\" placeholder=\"请输入身份证\" />\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <Row gutter={16}>\r\n                                            <Col span={12}>\r\n                                                <Form.Item\r\n                                                    name=\"phone\"\r\n                                                    label=\"手机号码\"\r\n                                                    rules={[{ required: true, message: '请输入手机号码!' }]}\r\n                                                    required=\"true\"\r\n                                                    initialValue={passengerInfo.passengerPhone}\r\n                                                >\r\n                                                    <Input maxLength={11} autoComplete=\"off\" placeholder=\"请输入手机号码\" />\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <Row gutter={16}>\r\n                                            <Col span={12}>\r\n                                                <Form.Item\r\n                                                    name=\"id\"\r\n                                                    initialValue={passengerInfo.id}\r\n                                                >\r\n                                                    <Input hidden={true} />\r\n                                                </Form.Item>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <div\r\n                                            style={{\r\n                                                textAlign: 'right',\r\n                                                marginTop: '50px'\r\n                                            }}\r\n                                        >\r\n                                            <Space size=\"large\">\r\n                                                <Button onClick={this.onClose} style={{ marginRight: 8 }}>\r\n                                                    取消\r\n                                                </Button>\r\n                                                <Button type=\"primary\" htmlType=\"submit\">\r\n                                                    确认\r\n                                                </Button>\r\n                                            </Space>\r\n\r\n                                        </div>\r\n                                    </Form>\r\n                                </Drawer>\r\n                            </div>\r\n                        </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\utils\\MemoryUser\\index.jsx",["219"],"E:\\React\\workspace\\order-ticket\\src\\utils\\storageUtils\\index.jsx",["220"],"import store from 'store'\r\nconst ADMIN_KEY = 'admin_key'\r\nconst ADMIN_TOKEN_KEY = 'admin_token_key'\r\n\r\nconst USER_KEY = 'user_key'\r\nconst USER_TOKEN_KEY = 'user_token_key'\r\nexport default {\r\n    // 保存admin\r\n    saveAdmin(admin) {\r\n        store.set(ADMIN_KEY, admin)\r\n    },\r\n    // 读取admin\r\n    getAdmin() {\r\n        return store.get(ADMIN_KEY) || {}\r\n    },\r\n\r\n    // 删除user\r\n    removeAdmin() {\r\n        store.remove(ADMIN_KEY)\r\n    },\r\n\r\n    // 保存token\r\n    saveAdminToken(token) {\r\n        store.set(ADMIN_TOKEN_KEY, token)\r\n    },\r\n    getAdminToken() {\r\n        return store.get(ADMIN_TOKEN_KEY)\r\n    },\r\n    removeAdminToken() {\r\n        store.remove(ADMIN_TOKEN_KEY)\r\n    },\r\n\r\n\r\n    saveUser(user) {\r\n        store.set(USER_KEY, user)\r\n    },\r\n    getUser() {\r\n        return store.get(USER_KEY) || {}\r\n    },\r\n    removeUser() {\r\n        store.remove(USER_KEY)\r\n    },\r\n\r\n    // 保存token\r\n    saveUserToken(token) {\r\n        store.set(USER_TOKEN_KEY, token)\r\n    },\r\n    getUserToken() {\r\n        return store.get(USER_TOKEN_KEY)\r\n    },\r\n    removeUserToken() {\r\n        store.remove(USER_TOKEN_KEY)\r\n    },\r\n\r\n\r\n}","E:\\React\\workspace\\order-ticket\\src\\api\\dev\\site.js",[],"E:\\React\\workspace\\order-ticket\\src\\api\\dev\\admin.js",[],"E:\\React\\workspace\\order-ticket\\src\\api\\dev\\carriage.js",[],"E:\\React\\workspace\\order-ticket\\src\\api\\dev\\train.js",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\Add\\index.jsx",[],"E:\\React\\workspace\\order-ticket\\src\\pages\\Dev\\Trains\\Updata\\index.jsx",["221","222"],"import React, { Component } from 'react'\r\nimport {\r\n    Input, Card,\r\n    Form, Button, Col, Row, Space, Select, TimePicker, message\r\n} from 'antd';\r\nimport moment from 'moment'\r\nimport SiteInfo from '../SiteInfo';\r\nimport CarriageInfo from '../CarriageInfo'\r\nimport MyNavLink from '../../../../components/MyNavLink'\r\nimport { updataTrain, getTrainInfo } from '../../../../api/dev/train'\r\nimport { createFromIconfontCN } from '@ant-design/icons';\r\nimport LinkButton from '../../../../components/LinkButton';\r\n\r\nconst IconFont = createFromIconfontCN({\r\n    scriptUrl: '//at.alicdn.com/t/font_2779508_d3ob7o1ykpv.js',\r\n})\r\n\r\nconst { Option } = Select\r\nconst format = 'HH:mm'\r\nexport default class TrainUpdate extends Component {\r\n\r\n    state = {\r\n        siteList: [],\r\n        carriageList: [],\r\n        carriages: [],\r\n        site: {},\r\n        isUpdata: 0,\r\n    }\r\n\r\n    deleteCarriage = (key) => {\r\n        const carriages = [...this.state.carriages];\r\n        const newDataSource = carriages.filter((item) => {\r\n            if (item.carriageOrder !== key) {\r\n                if (item.carriageOrder > key) {\r\n                    --item.carriageOrder\r\n                }\r\n                return item\r\n            }\r\n        })\r\n        const carriageIdList = newDataSource.map((item) => {\r\n            return item.carriageId\r\n        })\r\n        this.setState({\r\n            carriageList: carriageIdList,\r\n            isUpdata: 1,\r\n        });\r\n    }\r\n\r\n    deleteSite = (number) => {\r\n        const siteList = [...this.state.siteList];\r\n        const newDataSource = siteList.filter((item) => {\r\n            if (item.number !== number) {\r\n                if (item.number > number) {\r\n                    --item.number\r\n                }\r\n                return item\r\n            }\r\n        })\r\n        this.setState({\r\n            siteList: newDataSource,\r\n            isUpdata: 1,\r\n        });\r\n    }\r\n\r\n    // 判断是否修改过表单\r\n    handleIsUpdata = () => {\r\n        this.setState({ isUpdata: 1 })\r\n    }\r\n\r\n    // 更新车次\r\n    updataTrain = async (values) => {\r\n        const { siteList, carriageList, isUpdata } = this.state\r\n        if (isUpdata === 1) {\r\n            const startTime = moment(values.startTime).format('HH:mm')\r\n            const train = { ...values, startTime, siteList, carriageList }\r\n            const result = await updataTrain(train)\r\n            if (result.code === 1) {\r\n                message.success('更新成功')\r\n                this.props.history.goBack()\r\n            } else {\r\n                message.error(result.msg)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    addSite = (site) => {\r\n        const { siteList } = this.state\r\n        const newSite = [...siteList, site]\r\n        this.setState({ siteList: newSite, isUpdata: 1, })\r\n    }\r\n\r\n    addCarriage = (carriage) => {\r\n        const { carriageList } = this.state\r\n        const newCarriage = [...carriageList, carriage]\r\n        this.setState({ carriageList: newCarriage, isUpdata: 1, })\r\n    }\r\n\r\n    async componentWillMount() {\r\n        const { id } = this.props.match.params\r\n        const result = await getTrainInfo(id)\r\n        if (result.code === 1) {\r\n            const { carriageList } = result.data\r\n            const carriageIdList = carriageList.map((item, _) => {\r\n                return item.carriageId\r\n            })\r\n            this.setState({\r\n                siteList: result.data.siteList,\r\n                carriages: result.data.carriageList,\r\n                site: result.data.baseInfo,\r\n                carriageList: carriageIdList\r\n            })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { siteList, carriages, site } = this.state\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Card\r\n                        title={<span><LinkButton onClick={() => { this.props.history.goBack() }}><IconFont type=\"anticonlishi-xunchaxiangqing-jiantou\" /></LinkButton><span style={{ fontSize: '30px', marginLeft: '40px' }}>编辑车次</span></span>}\r\n                    >\r\n                        {\r\n                            Object.keys(site).length ?\r\n                                <Form\r\n                                    layout=\"vertical\"\r\n                                    onFinish={this.updataTrain}\r\n                                    onValuesChange={this.handleIsUpdata}\r\n                                >\r\n                                    <Row gutter={16}>\r\n                                        <Col span={12}>\r\n                                            <Form.Item\r\n                                                name=\"trainNumber\"\r\n                                                label=\"车次\"\r\n                                                rules={[{ required: true, message: '请输入车次' }]}\r\n                                                required=\"true\"\r\n                                                initialValue={site.trainNumber}\r\n                                            >\r\n                                                <Input placeholder=\"请输入车次\" readOnly />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                        <Col span={12}>\r\n                                            <Form.Item\r\n                                                name=\"isReturn\"\r\n                                                label=\"返程车\"\r\n                                                rules={[{ required: true, message: '请选择是否返程' }]}\r\n                                                required=\"true\"\r\n                                                initialValue={site.isReturn}\r\n                                            >\r\n                                                <Select placeholder=\"是否返程\" >\r\n                                                    <Option value={1}>是</Option>\r\n                                                    <Option value={0}>否</Option>\r\n                                                </Select>\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row gutter={16}>\r\n                                        <Col span={12}>\r\n                                            <Form.Item\r\n                                                name=\"type\"\r\n                                                label=\"类别\"\r\n                                                rules={[{ required: true, message: '请选择类别' }]}\r\n                                                required=\"true\"\r\n                                                initialValue={site.type}\r\n                                            >\r\n                                                <Select placeholder=\"类别\">\r\n                                                    <Option value={1}>动车</Option>\r\n                                                    <Option value={2}>高铁</Option>\r\n                                                </Select>\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                        <Col span={12}>\r\n                                            <Form.Item\r\n                                                name=\"startTime\"\r\n                                                label=\"发车时间\"\r\n                                                rules={[{ required: true, message: '请选择发车时间' }]}\r\n                                                required=\"true\"\r\n                                                initialValue={moment(site.startTime, format)}\r\n                                            >\r\n                                                <TimePicker format={format} />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row gutter={16}>\r\n                                        <Col span={12}>\r\n                                            <Form.Item\r\n                                                name=\"trainCount\"\r\n                                                label=\"班车数量\"\r\n                                                rules={[{ required: true, message: '请输入班车数量' }]}\r\n                                                initialValue={site.shift}\r\n                                            >\r\n                                                <Input placeholder=\"请输入班车数量\" />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row gutter={16}>\r\n                                        <Col span={12}>\r\n                                            <Form.Item\r\n                                                rules={[{ required: true, message: '请输入站点信息' }]}\r\n\r\n                                            >\r\n                                                <SiteInfo addSite={this.addSite} deleteSite={this.deleteSite} siteList={siteList} />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row gutter={16}>\r\n                                        <Col span={20}>\r\n                                            <Form.Item\r\n                                                rules={[{ required: true, message: '请输入车厢信息' }]}\r\n                                            >\r\n                                                <CarriageInfo addCarriage={this.addCarriage} deleteCarriage={this.deleteCarriage} carriageList={carriages} />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <div\r\n                                        style={{\r\n                                            textAlign: 'right',\r\n                                            marginTop: '50px'\r\n                                        }}\r\n                                    >\r\n                                        <Space size=\"large\">\r\n                                            <MyNavLink to=\"/dev/trains\">\r\n                                                <Button style={{ marginRight: 8 }}>\r\n                                                    取消\r\n                                                </Button>\r\n                                            </MyNavLink>\r\n                                            <Button type=\"primary\" htmlType=\"submit\">\r\n                                                确认\r\n                                            </Button>\r\n                                        </Space>\r\n\r\n                                    </div>\r\n                                </Form> : null\r\n                        }\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","E:\\React\\workspace\\order-ticket\\src\\api\\dev\\order.js",[],"E:\\React\\workspace\\order-ticket\\src\\api\\user\\search.js",[],"E:\\React\\workspace\\order-ticket\\src\\api\\user\\user.js",[],"E:\\React\\workspace\\order-ticket\\src\\api\\user\\order.js",[],"E:\\React\\workspace\\order-ticket\\src\\common\\methods.js",[],{"ruleId":"223","replacedBy":"224"},{"ruleId":"225","replacedBy":"226"},{"ruleId":"227","severity":1,"message":"228","line":9,"column":7,"nodeType":"229","messageId":"230","endLine":9,"endColumn":13},{"ruleId":"231","severity":1,"message":"232","line":406,"column":132,"nodeType":"233","messageId":"234","endLine":406,"endColumn":151},{"ruleId":"235","severity":1,"message":"236","line":156,"column":56,"nodeType":"237","messageId":"238","endLine":156,"endColumn":58},{"ruleId":"227","severity":1,"message":"239","line":208,"column":19,"nodeType":"229","messageId":"230","endLine":208,"endColumn":35},{"ruleId":"235","severity":1,"message":"236","line":53,"column":56,"nodeType":"237","messageId":"238","endLine":53,"endColumn":58},{"ruleId":"227","severity":1,"message":"240","line":3,"column":24,"nodeType":"229","messageId":"230","endLine":3,"endColumn":34},{"ruleId":"235","severity":1,"message":"241","line":71,"column":49,"nodeType":"237","messageId":"238","endLine":71,"endColumn":51},{"ruleId":"242","severity":1,"message":"243","line":93,"column":25,"nodeType":"244","messageId":"245","endLine":188,"endColumn":10},{"ruleId":"227","severity":1,"message":"246","line":1,"column":16,"nodeType":"229","messageId":"230","endLine":1,"endColumn":21},{"ruleId":"227","severity":1,"message":"247","line":1,"column":60,"nodeType":"229","messageId":"230","endLine":1,"endColumn":66},{"ruleId":"235","severity":1,"message":"236","line":47,"column":56,"nodeType":"237","messageId":"238","endLine":47,"endColumn":58},{"ruleId":"235","severity":1,"message":"241","line":71,"column":53,"nodeType":"237","messageId":"238","endLine":71,"endColumn":55},{"ruleId":"235","severity":1,"message":"248","line":100,"column":36,"nodeType":"237","messageId":"249","endLine":100,"endColumn":38},{"ruleId":"235","severity":1,"message":"248","line":130,"column":31,"nodeType":"237","messageId":"249","endLine":130,"endColumn":33},{"ruleId":"227","severity":1,"message":"250","line":2,"column":43,"nodeType":"229","messageId":"230","endLine":2,"endColumn":46},{"ruleId":"227","severity":1,"message":"251","line":2,"column":48,"nodeType":"229","messageId":"230","endLine":2,"endColumn":51},{"ruleId":"227","severity":1,"message":"252","line":2,"column":53,"nodeType":"229","messageId":"230","endLine":2,"endColumn":59},{"ruleId":"227","severity":1,"message":"246","line":4,"column":5,"nodeType":"229","messageId":"230","endLine":4,"endColumn":10},{"ruleId":"227","severity":1,"message":"253","line":4,"column":53,"nodeType":"229","messageId":"230","endLine":4,"endColumn":58},{"ruleId":"227","severity":1,"message":"254","line":58,"column":15,"nodeType":"229","messageId":"230","endLine":58,"endColumn":19},{"ruleId":"255","severity":1,"message":"256","line":1,"column":1,"nodeType":"257","endLine":4,"endColumn":2},{"ruleId":"255","severity":1,"message":"256","line":7,"column":1,"nodeType":"257","endLine":56,"endColumn":2},{"ruleId":"235","severity":1,"message":"236","line":32,"column":55,"nodeType":"237","messageId":"238","endLine":32,"endColumn":57},{"ruleId":"235","severity":1,"message":"236","line":51,"column":54,"nodeType":"237","messageId":"238","endLine":51,"endColumn":56},"no-native-reassign",["258"],"no-negated-in-lhs",["259"],"no-unused-vars","'format' is assigned a value but never used.","Identifier","unusedVar","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","noDuplicateProps","array-callback-return","Array.prototype.filter() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","'newCarriageLists' is assigned a value but never used.","'Pagination' is defined but never used.","Array.prototype.find() expects a value to be returned at the end of arrow function.","no-sparse-arrays","Unexpected comma in middle of array.","ArrayExpression","unexpectedSparseArray","'Input' is defined but never used.","'Drawer' is defined but never used.","Array.prototype.map() expects a return value from arrow function.","expectedInside","'Row' is defined but never used.","'Col' is defined but never used.","'Select' is defined but never used.","'Radio' is defined but never used.","'user' is assigned a value but never used.","import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation"]
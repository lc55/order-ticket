{"ast":null,"code":"// 异步发送ajax请求的模块\n// 封装axios库\nimport axios from \"axios\";\nimport { message } from \"antd\";\nimport storageUtils from \"../utils/storageUtils\";\nimport { pathIsDev } from '../common/methods';\nconst isAdmin = pathIsDev(); // 请求拦截\n\naxios.interceptors.request.use(function (config) {\n  if (isAdmin) {\n    if (storageUtils.getAdminToken()) {\n      const a = storageUtils.getAdminToken();\n      console.log(a);\n      config.headers.Auth = storageUtils.getAdminToken();\n    }\n  } else {\n    if (storageUtils.getUserToken()) {\n      config.headers.Auth = storageUtils.getUserToken();\n    }\n  }\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\nexport default async function ajax(url, data = {}, type = 'GET') {\n  try {\n    return new Promise(resolve => {\n      let promise; // 1.执行ajax请求\n\n      if (type === 'GET') {\n        promise = axios.get(url, {\n          params: data\n        });\n      } else {\n        promise = axios.post(url, data);\n      } // 2.如果成功了，调用resolve(value)\n\n\n      promise.then(response => {\n        resolve(response.data);\n      });\n    });\n  } catch (error) {\n    // 3.如果失败了，不调用reject(reason),提示异常信息\n    message.error('请求出错了：', error.message);\n  }\n}","map":{"version":3,"sources":["E:/React/workspace/order-ticket/src/api/ajax.js"],"names":["axios","message","storageUtils","pathIsDev","isAdmin","interceptors","request","use","config","getAdminToken","a","console","log","headers","Auth","getUserToken","error","Promise","reject","ajax","url","data","type","resolve","promise","get","params","post","then","response"],"mappings":"AAAA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,SAASC,SAAT,QAA0B,mBAA1B;AACA,MAAMC,OAAO,GAAGD,SAAS,EAAzB,C,CAEA;;AACAH,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAUC,MAAV,EAAkB;AAC7C,MAAIJ,OAAJ,EAAa;AACT,QAAIF,YAAY,CAACO,aAAb,EAAJ,EAAkC;AAC9B,YAAMC,CAAC,GAAGR,YAAY,CAACO,aAAb,EAAV;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACAF,MAAAA,MAAM,CAACK,OAAP,CAAeC,IAAf,GAAsBZ,YAAY,CAACO,aAAb,EAAtB;AACH;AACJ,GAND,MAMO;AACH,QAAIP,YAAY,CAACa,YAAb,EAAJ,EAAiC;AAC7BP,MAAAA,MAAM,CAACK,OAAP,CAAeC,IAAf,GAAsBZ,YAAY,CAACa,YAAb,EAAtB;AACH;AACJ;;AACD,SAAOP,MAAP;AACH,CAbD,EAaG,UAAUQ,KAAV,EAAiB;AAChB,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAfD;AAiBA,eAAe,eAAeG,IAAf,CAAoBC,GAApB,EAAyBC,IAAI,GAAG,EAAhC,EAAoCC,IAAI,GAAG,KAA3C,EAAkD;AAE7D,MAAI;AACA,WAAO,IAAIL,OAAJ,CAAaM,OAAD,IAAa;AAC5B,UAAIC,OAAJ,CAD4B,CAE5B;;AACA,UAAIF,IAAI,KAAK,KAAb,EAAoB;AAChBE,QAAAA,OAAO,GAAGxB,KAAK,CAACyB,GAAN,CAAUL,GAAV,EAAe;AACrBM,UAAAA,MAAM,EAAEL;AADa,SAAf,CAAV;AAGH,OAJD,MAIO;AACHG,QAAAA,OAAO,GAAGxB,KAAK,CAAC2B,IAAN,CAAWP,GAAX,EAAgBC,IAAhB,CAAV;AACH,OAT2B,CAU5B;;;AACAG,MAAAA,OAAO,CAACI,IAAR,CAAaC,QAAQ,IAAI;AACrBN,QAAAA,OAAO,CAACM,QAAQ,CAACR,IAAV,CAAP;AACH,OAFD;AAIH,KAfM,CAAP;AAgBH,GAjBD,CAiBE,OAAOL,KAAP,EAAc;AACZ;AACAf,IAAAA,OAAO,CAACe,KAAR,CAAc,QAAd,EAAwBA,KAAK,CAACf,OAA9B;AACH;AACJ","sourcesContent":["// 异步发送ajax请求的模块\r\n// 封装axios库\r\nimport axios from \"axios\"\r\nimport { message } from \"antd\"\r\nimport storageUtils from \"../utils/storageUtils\"\r\nimport { pathIsDev } from '../common/methods'\r\nconst isAdmin = pathIsDev()\r\n\r\n// 请求拦截\r\naxios.interceptors.request.use(function (config) {\r\n    if (isAdmin) {\r\n        if (storageUtils.getAdminToken()) {\r\n            const a = storageUtils.getAdminToken()\r\n            console.log(a)\r\n            config.headers.Auth = storageUtils.getAdminToken()\r\n        }\r\n    } else {\r\n        if (storageUtils.getUserToken()) {\r\n            config.headers.Auth = storageUtils.getUserToken()\r\n        }\r\n    }\r\n    return config\r\n}, function (error) {\r\n    return Promise.reject(error)\r\n})\r\n\r\nexport default async function ajax(url, data = {}, type = 'GET') {\r\n\r\n    try {\r\n        return new Promise((resolve) => {\r\n            let promise\r\n            // 1.执行ajax请求\r\n            if (type === 'GET') {\r\n                promise = axios.get(url, {\r\n                    params: data\r\n                })\r\n            } else {\r\n                promise = axios.post(url, data)\r\n            }\r\n            // 2.如果成功了，调用resolve(value)\r\n            promise.then(response => {\r\n                resolve(response.data)\r\n            })\r\n\r\n        })\r\n    } catch (error) {\r\n        // 3.如果失败了，不调用reject(reason),提示异常信息\r\n        message.error('请求出错了：', error.message)\r\n    }\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}
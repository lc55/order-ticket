{"ast":null,"code":"var _jsxFileName = \"E:\\\\React\\\\workspace\\\\order-ticket\\\\src\\\\pages\\\\Dev\\\\Trains\\\\AddUpdate\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport { Input, Card, Form, Button, Col, Row, Space, Select, TimePicker, message } from 'antd';\nimport moment from 'moment';\nimport SiteInfo from '../SiteInfo';\nimport CarriageInfo from '../CarriageInfo';\nimport MyNavLink from '../../../../components/MyNavLink';\nimport { addTrain } from '../../../../api/dev/train';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nconst format = 'HH:mm';\nexport default class TrainAddUpdate extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      siteList: [],\n      carriageList: []\n    };\n\n    this.addTrain = async values => {\n      const {\n        siteList,\n        carriageList\n      } = this.state;\n      const startTime = moment(values.startTime).format('HH:mm');\n      const train = { ...values,\n        startTime,\n        siteList,\n        carriageList\n      };\n      const result = await addTrain(train);\n\n      if (result.code === 1) {\n        message.success('添加成功');\n        this.props.history.goBack();\n      } else {\n        message.error(result.msg);\n      }\n    };\n\n    this.addSite = site => {\n      const {\n        siteList\n      } = this.state;\n      const newSite = [...siteList, site];\n      this.setState({\n        siteList: newSite\n      });\n    };\n\n    this.addCarriage = carriage => {\n      const {\n        carriageList\n      } = this.state;\n      const newCarriage = [...carriageList, carriage];\n      this.setState({\n        carriageList: newCarriage\n      });\n    };\n  }\n\n  render() {\n    const {\n      train\n    } = this.props.location.state; // console.log(train)\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          title: /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '30px'\n            },\n            children: \"\\u65B0\\u589E\\u8F66\\u6B21\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 32\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            layout: \"vertical\",\n            onFinish: this.addTrain,\n            children: [/*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"trainNumber\",\n                  label: \"\\u8F66\\u6B21\",\n                  rules: [{\n                    required: true,\n                    message: '请输入车次'\n                  }],\n                  required: \"true\",\n                  initialValue: train.trainNumber,\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    placeholder: \"\\u8BF7\\u8F93\\u5165\\u8F66\\u6B21\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"isReturn\",\n                  label: \"\\u8FD4\\u7A0B\\u8F66\",\n                  rules: [{\n                    required: true,\n                    message: '请选择是否返程'\n                  }],\n                  required: \"true\",\n                  initialValue: train.isReturn === '否' ? 0 : 1,\n                  children: /*#__PURE__*/_jsxDEV(Select, {\n                    placeholder: \"\\u662F\\u5426\\u8FD4\\u7A0B\",\n                    children: [/*#__PURE__*/_jsxDEV(Option, {\n                      value: 1,\n                      children: \"\\u662F\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 81,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Option, {\n                      value: 0,\n                      children: \"\\u5426\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 82,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 80,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 73,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"type\",\n                  label: \"\\u7C7B\\u522B\",\n                  rules: [{\n                    required: true,\n                    message: '请选择类别'\n                  }],\n                  required: \"true\",\n                  initialValue: train.type === '动车' ? 1 : 2,\n                  children: /*#__PURE__*/_jsxDEV(Select, {\n                    children: [/*#__PURE__*/_jsxDEV(Option, {\n                      value: 1,\n                      children: \"\\u52A8\\u8F66\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Option, {\n                      value: 2,\n                      children: \"\\u9AD8\\u94C1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 98,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"startTime\",\n                  label: \"\\u53D1\\u8F66\\u65F6\\u95F4\",\n                  rules: [{\n                    required: true,\n                    message: '请选择发车时间'\n                  }],\n                  required: \"true\",\n                  children: /*#__PURE__*/_jsxDEV(TimePicker, {\n                    format: format,\n                    defaultValue: train.startTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"trainCount\",\n                  label: \"\\u73ED\\u8F66\\u6570\\u91CF\",\n                  rules: [{\n                    required: true,\n                    message: '请输入班车数量'\n                  }] // initialValue={train.shift}\n                  ,\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    placeholder: \"\\u8BF7\\u8F93\\u5165\\u73ED\\u8F66\\u6570\\u91CF\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  rules: [{\n                    required: true,\n                    message: '请输入站点信息'\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(SiteInfo, {\n                    addSite: this.addSite\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 20,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  rules: [{\n                    required: true,\n                    message: '请输入车厢信息'\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(CarriageInfo, {\n                    addCarriage: this.addCarriage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: 'right',\n                marginTop: '50px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Space, {\n                size: \"large\",\n                children: [/*#__PURE__*/_jsxDEV(MyNavLink, {\n                  to: \"/dev/trains\",\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    style: {\n                      marginRight: 8\n                    },\n                    children: \"\\u53D6\\u6D88\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"primary\",\n                  htmlType: \"submit\",\n                  children: \"\\u786E\\u8BA4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/React/workspace/order-ticket/src/pages/Dev/Trains/AddUpdate/index.jsx"],"names":["React","Component","Input","Card","Form","Button","Col","Row","Space","Select","TimePicker","message","moment","SiteInfo","CarriageInfo","MyNavLink","addTrain","Option","format","TrainAddUpdate","state","siteList","carriageList","values","startTime","train","result","code","success","props","history","goBack","error","msg","addSite","site","newSite","setState","addCarriage","carriage","newCarriage","render","location","fontSize","required","trainNumber","isReturn","type","textAlign","marginTop","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {\r\n    Input, Card,\r\n    Form, Button, Col, Row, Space, Select, TimePicker, message\r\n} from 'antd';\r\nimport moment from 'moment'\r\nimport SiteInfo from '../SiteInfo';\r\nimport CarriageInfo from '../CarriageInfo'\r\nimport MyNavLink from '../../../../components/MyNavLink'\r\nimport { addTrain } from '../../../../api/dev/train';\r\n\r\nconst { Option } = Select\r\nconst format = 'HH:mm'\r\nexport default class TrainAddUpdate extends Component {\r\n\r\n    state = {\r\n        siteList: [],\r\n        carriageList: []\r\n    }\r\n\r\n    // 添加车次\r\n    addTrain = async (values) => {\r\n        const { siteList, carriageList } = this.state\r\n        const startTime = moment(values.startTime).format('HH:mm')\r\n        const train = { ...values, startTime, siteList, carriageList }\r\n        const result = await addTrain(train)\r\n        if (result.code === 1) {\r\n            message.success('添加成功')\r\n            this.props.history.goBack()\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    addSite = (site) => {\r\n        const { siteList } = this.state\r\n        const newSite = [...siteList, site]\r\n        this.setState({ siteList: newSite })\r\n    }\r\n\r\n    addCarriage = (carriage) => {\r\n        const { carriageList } = this.state\r\n        const newCarriage = [...carriageList, carriage]\r\n        this.setState({ carriageList: newCarriage })\r\n    }\r\n\r\n    render() {\r\n        const { train } = this.props.location.state\r\n        // console.log(train)\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Card\r\n                        title={<span style={{ fontSize: '30px' }}>新增车次</span>}\r\n                    >\r\n                        <Form\r\n                            layout=\"vertical\"\r\n                            onFinish={this.addTrain}\r\n                        >\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"trainNumber\"\r\n                                        label=\"车次\"\r\n                                        rules={[{ required: true, message: '请输入车次' }]}\r\n                                        required=\"true\"\r\n                                    initialValue={train.trainNumber}\r\n                                    >\r\n                                        <Input placeholder=\"请输入车次\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"isReturn\"\r\n                                        label=\"返程车\"\r\n                                        rules={[{ required: true, message: '请选择是否返程' }]}\r\n                                        required=\"true\"\r\n                                    initialValue={train.isReturn === '否' ? 0 : 1}\r\n                                    >\r\n                                        <Select placeholder=\"是否返程\" >\r\n                                            <Option value={1}>是</Option>\r\n                                            <Option value={0}>否</Option>\r\n                                        </Select>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"type\"\r\n                                        label=\"类别\"\r\n                                        rules={[{ required: true, message: '请选择类别' }]}\r\n                                        required=\"true\"\r\n                                    initialValue={train.type === '动车' ? 1 : 2}\r\n                                    >\r\n                                        <Select>\r\n                                            <Option value={1}>动车</Option>\r\n                                            <Option value={2}>高铁</Option>\r\n                                        </Select>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"startTime\"\r\n                                        label=\"发车时间\"\r\n                                        rules={[{ required: true, message: '请选择发车时间' }]}\r\n                                        required=\"true\"\r\n                                    >\r\n                                        <TimePicker format={format} defaultValue={train.startTime}/>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"trainCount\"\r\n                                        label=\"班车数量\"\r\n                                        rules={[{ required: true, message: '请输入班车数量' }]}\r\n                                        // initialValue={train.shift}\r\n                                    >\r\n                                        <Input placeholder=\"请输入班车数量\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        rules={[{ required: true, message: '请输入站点信息' }]}\r\n\r\n                                    >\r\n                                        <SiteInfo addSite={this.addSite} />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={20}>\r\n                                    <Form.Item\r\n                                        rules={[{ required: true, message: '请输入车厢信息' }]}\r\n                                    >\r\n                                        <CarriageInfo addCarriage={this.addCarriage} />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <div\r\n                                style={{\r\n                                    textAlign: 'right',\r\n                                    marginTop: '50px'\r\n                                }}\r\n                            >\r\n                                <Space size=\"large\">\r\n                                    <MyNavLink to=\"/dev/trains\">\r\n                                        <Button style={{ marginRight: 8 }}>\r\n                                            取消\r\n                                        </Button>\r\n                                    </MyNavLink>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">\r\n                                        确认\r\n                                    </Button>\r\n                                </Space>\r\n\r\n                            </div>\r\n                        </Form>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
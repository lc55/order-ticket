{"ast":null,"code":"var _jsxFileName = \"E:\\\\React\\\\workspace\\\\order-ticket\\\\src\\\\pages\\\\User\\\\Search\\\\index.jsx\";\nimport { Form, Input, Space, Button, Card, DatePicker, message, Select } from 'antd';\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport { getSiteList } from '../../../api/dev/train';\nimport { moreTicket } from '../../../api/user/search';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nconst format = \"YYYY-MM-DD\";\nexport default class Search extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      siteList: []\n    };\n\n    this.disabledDate = current => {\n      return current && current < moment().subtract(1, 'days');\n    };\n\n    this.onFinish = async values => {\n      let {\n        startTime,\n        startId,\n        endId\n      } = values;\n      startTime = moment(startTime).format(format);\n      const result = await moreTicket(startId, endId, startTime);\n\n      if (result.code === 1) {\n        this.props.history.push({\n          pathname: \"/user/ticketList\",\n          state: result.data\n        });\n      } else {\n        message.error(result.msg);\n      }\n    };\n  }\n\n  async componentDidMount() {\n    const result = await getSiteList();\n\n    if (result.code === 1) {\n      this.setState({\n        siteList: result.data\n      });\n    } else {\n      message.error(result.msg);\n    }\n  }\n\n  render() {\n    const {\n      siteList\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        bordered: false,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          layout: \"horizontal\",\n          onFinish: this.onFinish,\n          labelCol: {\n            span: 2\n          },\n          wrapperCol: {\n            span: 8\n          },\n          style: {\n            marginLeft: '200px',\n            marginTop: '50px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"startId\",\n            label: \"\\u51FA\\u53D1\\u5730\",\n            rules: [{\n              required: true,\n              message: '请输入出发地'\n            }],\n            required: \"true\",\n            children: /*#__PURE__*/_jsxDEV(Select, {\n              showSearch: true,\n              placeholder: \"\\u53EF\\u4EE5\\u641C\\u7D22\\u7AD9\\u70B9\",\n              filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n              children: siteList.map((item, _) => {\n                return /*#__PURE__*/_jsxDEV(Option, {\n                  value: item.id,\n                  children: item.siteName\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 44\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"endId\",\n            label: \"\\u76EE\\u7684\\u5730\",\n            rules: [{\n              required: true,\n              message: '请输入目的地'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Select, {\n              showSearch: true,\n              placeholder: \"\\u53EF\\u4EE5\\u641C\\u7D22\\u7AD9\\u70B9\",\n              filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n              children: siteList.map((item, _) => {\n                return /*#__PURE__*/_jsxDEV(Option, {\n                  value: item.id,\n                  children: item.siteName\n                }, item.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 44\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"startTime\",\n            label: \"\\u51FA\\u53D1\\u65E5\\u671F\",\n            rules: [{\n              required: true,\n              message: '请选择出发日期'\n            }],\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {\n              format: \"YYYY-MM-DD\",\n              disabledDate: this.disabledDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'right',\n              marginTop: '20px',\n              marginRight: '650px'\n            },\n            children: /*#__PURE__*/_jsxDEV(Space, {\n              size: \"large\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                size: \"large\",\n                shape: \"round\",\n                htmlType: \"reset\",\n                style: {\n                  marginRight: 50\n                },\n                children: \"\\u91CD\\u7F6E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                size: \"large\",\n                shape: \"round\",\n                htmlType: \"submit\",\n                type: \"primary\",\n                style: {\n                  marginRight: 400\n                },\n                children: \"\\u67E5\\u8BE2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/React/workspace/order-ticket/src/pages/User/Search/index.jsx"],"names":["Form","Input","Space","Button","Card","DatePicker","message","Select","React","Component","moment","getSiteList","moreTicket","Option","format","Search","state","siteList","disabledDate","current","subtract","onFinish","values","startTime","startId","endId","result","code","props","history","push","pathname","data","error","msg","componentDidMount","setState","render","span","marginLeft","marginTop","required","input","option","children","toLowerCase","indexOf","map","item","_","id","siteName","textAlign","marginRight"],"mappings":"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","sourcesContent":["import { Form, Input, Space, Button, Card, DatePicker, message, Select } from 'antd'\r\nimport React, { Component } from 'react'\r\nimport moment from 'moment';\r\nimport { getSiteList } from '../../../api/dev/train';\r\nimport { moreTicket } from '../../../api/user/search';\r\n\r\nconst { Option } = Select\r\nconst format = \"YYYY-MM-DD\"\r\nexport default class Search extends Component {\r\n\r\n    state = {\r\n        siteList: []\r\n    }\r\n\r\n    // 设置不可选中时间\r\n    disabledDate = (current) => {\r\n        return current && current < moment().subtract(1, 'days')\r\n    }\r\n\r\n    // 查询\r\n    onFinish = async (values) => {\r\n        let { startTime, startId, endId } = values\r\n        startTime = moment(startTime).format(format)\r\n        const result = await moreTicket(startId, endId, startTime)\r\n        if (result.code === 1) {\r\n            this.props.history.push({ pathname: \"/user/ticketList\", state: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const result = await getSiteList()\r\n        if (result.code === 1) {\r\n            this.setState({ siteList: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { siteList } = this.state\r\n        return (\r\n            <div>\r\n                <Card\r\n                    bordered={false}\r\n                >\r\n                    <Form\r\n                        layout=\"horizontal\"\r\n                        onFinish={this.onFinish}\r\n                        labelCol={{ span: 2 }}\r\n                        wrapperCol={{ span: 8 }}\r\n                        style={{ marginLeft: '200px', marginTop: '50px' }}\r\n                    >\r\n\r\n                        <Form.Item\r\n                            name=\"startId\"\r\n                            label=\"出发地\"\r\n                            rules={[{ required: true, message: '请输入出发地' }]}\r\n                            required=\"true\"\r\n                        >\r\n                            <Select\r\n                                showSearch\r\n                                placeholder=\"可以搜索站点\"\r\n                                filterOption={(input, option) =>\r\n                                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                }\r\n                            >\r\n                                {siteList.map((item, _) => {\r\n                                    return <Option key={item.id} value={item.id}>{item.siteName}</Option>\r\n                                })}\r\n                            </Select>\r\n                        </Form.Item>\r\n\r\n\r\n                        <Form.Item\r\n                            name=\"endId\"\r\n                            label=\"目的地\"\r\n                            rules={[{ required: true, message: '请输入目的地' }]}\r\n                        >\r\n                            <Select\r\n                                showSearch\r\n                                placeholder=\"可以搜索站点\"\r\n                                filterOption={(input, option) =>\r\n                                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                }\r\n                            >\r\n                                {siteList.map((item, _) => {\r\n                                    return <Option key={item.id} value={item.id}>{item.siteName}</Option>\r\n                                })}\r\n                            </Select>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            name=\"startTime\"\r\n                            label=\"出发日期\"\r\n                            rules={[{ required: true, message: '请选择出发日期' }]}\r\n                        >\r\n                            <DatePicker\r\n                                format=\"YYYY-MM-DD\"\r\n                                disabledDate={this.disabledDate}\r\n                            />\r\n                        </Form.Item>\r\n\r\n                        <div\r\n                            style={{\r\n                                textAlign: 'right',\r\n                                marginTop: '20px',\r\n                                marginRight: '650px'\r\n                            }}\r\n                        >\r\n                            <Space size=\"large\">\r\n                                <Button size=\"large\" shape=\"round\" htmlType=\"reset\" style={{ marginRight: 50 }}>\r\n                                    重置\r\n                                </Button>\r\n                                <Button size=\"large\" shape=\"round\" htmlType=\"submit\" type=\"primary\" style={{marginRight:400}}>\r\n                                    查询\r\n                                </Button>\r\n                            </Space>\r\n                        </div>\r\n                    </Form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
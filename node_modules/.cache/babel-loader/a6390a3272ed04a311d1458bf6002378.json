{"ast":null,"code":"var _jsxFileName = \"E:\\\\React\\\\workspace\\\\order-ticket\\\\src\\\\pages\\\\User\\\\Passenger\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport { Input, Card, Table, Drawer, Form, Button, Col, Row, Space, message, Radio, Popconfirm } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport LinkButton from '../../../components/LinkButton';\nimport { addPassenger, getPassengerList } from '../../../api/user/user';\nimport storageUtils from '../../../utils/storageUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class PlatForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.myForm = /*#__PURE__*/React.createRef();\n    this.state = {\n      showStatus: 0,\n      count: 0,\n      dataSource: []\n    };\n\n    this.showAddUser = () => {\n      this.setState({\n        visible: 1\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: 0\n      });\n      this.myForm.current.resetFields();\n    };\n\n    this.addPassenger = async values => {\n      const {\n        name,\n        idCard,\n        phone\n      } = values;\n      const user = storageUtils.getUser();\n      const result = await addPassenger(phone, name, idCard, user.id);\n\n      if (result.code === 1) {\n        message.success('添加成功');\n        this.setState({\n          visible: 0\n        });\n        this.myForm.current.resetFields();\n      } else {\n        message.error(result.msg);\n      }\n    };\n\n    this.showUpdateUser = () => {\n      this.setState({\n        visible: 2\n      });\n    };\n\n    this.updateUser = () => {\n      message.success('编辑成功');\n      this.setState({\n        visible: 0\n      });\n      this.myForm.current.resetFields();\n    };\n\n    this.handleDelete = key => {\n      console.log(\"发请求\", key);\n    };\n  }\n\n  componentDidMount() {\n    getPassengerList();\n  }\n\n  async getPassengerList() {\n    const user = storageUtils.getUser();\n    const result = await getPassengerList(user.id);\n\n    if (result.code === 1) {\n      this.setState({\n        dataSource: result.data\n      });\n    } else {\n      message.error(result.msg);\n    }\n  }\n\n  render() {\n    const {\n      visible,\n      dataSource\n    } = this.state;\n    const columns = [{\n      title: '姓名',\n      dataIndex: 'passengerName',\n      key: '1',\n      align: 'center'\n    }, {\n      title: '身份证',\n      dataIndex: 'passengerCard',\n      key: '2',\n      align: 'center'\n    }, {\n      title: '手机号码',\n      dataIndex: 'passengerPhone',\n      key: '3',\n      align: 'center'\n    }, {\n      title: '操作',\n      key: '4',\n      render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n        size: \"middle\",\n        children: [/*#__PURE__*/_jsxDEV(LinkButton, {\n          onClick: this.showUpdateUser,\n          children: \"\\u7F16\\u8F91\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n          title: \"\\u786E\\u5B9A\\u5220\\u9664\\u5417\",\n          onConfirm: () => this.handleDelete(record.key),\n          children: /*#__PURE__*/_jsxDEV(LinkButton, {\n            children: \"\\u5220\\u9664\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }, this),\n      align: 'center'\n    }];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          extra: /*#__PURE__*/_jsxDEV(Button, {\n            icon: /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 43\n            }, this),\n            type: \"primary\",\n            onClick: this.showAddUser,\n            children: \"\\u65B0\\u589E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 29\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: columns,\n            dataSource: dataSource,\n            bordered: true,\n            rowKey: \"key\",\n            pagination: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Drawer, {\n          title: \"\\u65B0\\u589E\\u7528\\u6237\",\n          width: 500,\n          onClose: this.onClose,\n          visible: visible === 1,\n          bodyStyle: {\n            paddingBottom: 80\n          },\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            layout: \"vertical\",\n            onFinish: this.addPassenger,\n            ref: this.myForm,\n            children: [/*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"name\",\n                  label: \"\\u59D3\\u540D\",\n                  rules: [{\n                    required: true,\n                    message: '请输入姓名!'\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    autoComplete: \"off\",\n                    placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"idCard\",\n                  label: \"\\u8EAB\\u4EFD\\u8BC1\",\n                  rules: [{\n                    required: true,\n                    message: '请输入身份证!'\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    maxLength: 18,\n                    autoComplete: \"off\",\n                    placeholder: \"\\u8BF7\\u8F93\\u5165\\u8EAB\\u4EFD\\u8BC1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"phone\",\n                  label: \"\\u624B\\u673A\\u53F7\\u7801\",\n                  rules: [{\n                    required: true,\n                    message: '请输入手机号码!'\n                  }],\n                  required: \"true\",\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    maxLength: 11,\n                    autoComplete: \"off\",\n                    placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: 'right',\n                marginTop: '50px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Space, {\n                size: \"large\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  onClick: this.onClose,\n                  style: {\n                    marginRight: 8\n                  },\n                  children: \"\\u53D6\\u6D88\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"primary\",\n                  htmlType: \"submit\",\n                  children: \"\\u786E\\u8BA4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Drawer, {\n          title: \"\\u7F16\\u8F91\\u7528\\u6237\",\n          width: 500,\n          onClose: this.onClose,\n          visible: visible === 2,\n          bodyStyle: {\n            paddingBottom: 80\n          },\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            layout: \"vertical\",\n            onFinish: this.updateUser,\n            ref: this.myForm,\n            children: [/*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"name\",\n                  label: \"\\u59D3\\u540D\",\n                  rules: [{\n                    required: true,\n                    message: '请输入姓名!'\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    autoComplete: \"off\",\n                    placeholder: \"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"idCard\",\n                  label: \"\\u8EAB\\u4EFD\\u8BC1\",\n                  rules: [{\n                    required: true,\n                    message: '请输入身份证!'\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    maxLength: 18,\n                    autoComplete: \"off\",\n                    placeholder: \"\\u8BF7\\u8F93\\u5165\\u8EAB\\u4EFD\\u8BC1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              gutter: 16,\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                span: 12,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"phone\",\n                  label: \"\\u624B\\u673A\\u53F7\\u7801\",\n                  rules: [{\n                    required: true,\n                    message: '请输入手机号码!'\n                  }],\n                  required: \"true\",\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    maxLength: 11,\n                    autoComplete: \"off\",\n                    placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: 'right',\n                marginTop: '50px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Space, {\n                size: \"large\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  onClick: this.onClose,\n                  style: {\n                    marginRight: 8\n                  },\n                  children: \"\\u53D6\\u6D88\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"primary\",\n                  htmlType: \"submit\",\n                  children: \"\\u786E\\u8BA4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/React/workspace/order-ticket/src/pages/User/Passenger/index.jsx"],"names":["React","Component","Input","Card","Table","Drawer","Form","Button","Col","Row","Space","message","Radio","Popconfirm","PlusOutlined","LinkButton","addPassenger","getPassengerList","storageUtils","PlatForm","myForm","createRef","state","showStatus","count","dataSource","showAddUser","setState","visible","onClose","current","resetFields","values","name","idCard","phone","user","getUser","result","id","code","success","error","msg","showUpdateUser","updateUser","handleDelete","key","console","log","componentDidMount","data","render","columns","title","dataIndex","align","_","record","paddingBottom","required","textAlign","marginTop","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {\r\n    Input, Card, Table,\r\n    Drawer, Form, Button, Col, Row, Space, message, Radio, Popconfirm\r\n} from 'antd';\r\nimport {\r\n    PlusOutlined\r\n} from '@ant-design/icons';\r\nimport LinkButton from '../../../components/LinkButton';\r\nimport { addPassenger, getPassengerList } from '../../../api/user/user';\r\nimport storageUtils from '../../../utils/storageUtils'\r\n\r\nexport default class PlatForm extends Component {\r\n    myForm = React.createRef()\r\n    state = {\r\n        showStatus: 0,\r\n        count: 0,\r\n        dataSource: []\r\n    }\r\n\r\n    // 打开添加抽屉\r\n    showAddUser = () => {\r\n        this.setState({ visible: 1 })\r\n    }\r\n\r\n    // 关闭抽屉\r\n    onClose = () => {\r\n        this.setState({ visible: 0 })\r\n        this.myForm.current.resetFields()\r\n    }\r\n\r\n    // 添加用户\r\n    addPassenger = async (values) => {\r\n        const { name, idCard, phone } = values\r\n        const user = storageUtils.getUser()\r\n        const result = await addPassenger(phone, name, idCard, user.id)\r\n        if (result.code === 1) {\r\n            message.success('添加成功')\r\n            this.setState({ visible: 0 })\r\n            this.myForm.current.resetFields()\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n\r\n    }\r\n\r\n    // 打开编辑的抽屉\r\n    showUpdateUser = () => {\r\n        this.setState({ visible: 2 })\r\n    }\r\n\r\n    updateUser = () => {\r\n        message.success('编辑成功')\r\n        this.setState({ visible: 0 })\r\n        this.myForm.current.resetFields()\r\n    }\r\n\r\n    handleDelete = (key) => {\r\n        console.log(\"发请求\", key)\r\n    }\r\n\r\n    componentDidMount() {\r\n        getPassengerList()\r\n    }\r\n\r\n    async getPassengerList() {\r\n        const user = storageUtils.getUser()\r\n        const result = await getPassengerList(user.id)\r\n        if (result.code === 1) {\r\n            this.setState({ dataSource: result.data })\r\n        } else {\r\n            message.error(result.msg)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { visible, dataSource } = this.state\r\n        const columns = [\r\n            {\r\n                title: '姓名',\r\n                dataIndex: 'passengerName',\r\n                key: '1',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '身份证',\r\n                dataIndex: 'passengerCard',\r\n                key: '2',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '手机号码',\r\n                dataIndex: 'passengerPhone',\r\n                key: '3',\r\n                align: 'center',\r\n            },\r\n            {\r\n                title: '操作',\r\n                key: '4',\r\n                render: (_, record) => (\r\n                    <Space size=\"middle\">\r\n                        <LinkButton onClick={this.showUpdateUser}>编辑</LinkButton>\r\n                        <Popconfirm title=\"确定删除吗\" onConfirm={() => this.handleDelete(record.key)}>\r\n                            <LinkButton >删除</LinkButton>\r\n                        </Popconfirm>\r\n                    </Space>\r\n                ),\r\n                align: 'center'\r\n            },\r\n        ]\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <Card\r\n                        extra={\r\n                            <Button icon={<PlusOutlined />} type=\"primary\" onClick={this.showAddUser}>新增</Button>\r\n                        }\r\n                    >\r\n                        <Table\r\n                            columns={columns}\r\n                            dataSource={dataSource}\r\n                            bordered\r\n                            rowKey=\"key\"\r\n                            pagination={false}\r\n                        />\r\n                    </Card>\r\n                </div>\r\n                {/* 新增的抽屉 */}\r\n                <div>\r\n                    <Drawer\r\n                        title=\"新增用户\"\r\n                        width={500}\r\n                        onClose={this.onClose}\r\n                        visible={visible === 1}\r\n                        bodyStyle={{ paddingBottom: 80 }}\r\n                    >\r\n                        <Form\r\n                            layout=\"vertical\"\r\n                            onFinish={this.addPassenger}\r\n                            ref={this.myForm}\r\n                        >\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"name\"\r\n                                        label=\"姓名\"\r\n                                        rules={[{ required: true, message: '请输入姓名!' }]}\r\n                                    >\r\n                                        <Input autoComplete=\"off\" placeholder=\"请输入姓名\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"idCard\"\r\n                                        label=\"身份证\"\r\n                                        rules={[{ required: true, message: '请输入身份证!' }]}\r\n                                    >\r\n                                        <Input maxLength={18} autoComplete=\"off\" placeholder=\"请输入身份证\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"phone\"\r\n                                        label=\"手机号码\"\r\n                                        rules={[{ required: true, message: '请输入手机号码!' }]}\r\n                                        required=\"true\"\r\n                                    >\r\n                                        <Input maxLength={11} autoComplete=\"off\" placeholder=\"请输入手机号码\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <div\r\n                                style={{\r\n                                    textAlign: 'right',\r\n                                    marginTop: '50px'\r\n                                }}\r\n                            >\r\n                                <Space size=\"large\">\r\n                                    <Button onClick={this.onClose} style={{ marginRight: 8 }}>\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">\r\n                                        确认\r\n                                    </Button>\r\n                                </Space>\r\n\r\n                            </div>\r\n                        </Form>\r\n                    </Drawer>\r\n                </div>\r\n                {/* 编辑的抽屉 */}\r\n                <div>\r\n                    <Drawer\r\n                        title=\"编辑用户\"\r\n                        width={500}\r\n                        onClose={this.onClose}\r\n                        visible={visible === 2}\r\n                        bodyStyle={{ paddingBottom: 80 }}\r\n                    >\r\n                        <Form\r\n                            layout=\"vertical\"\r\n                            onFinish={this.updateUser}\r\n                            ref={this.myForm}\r\n                        >\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"name\"\r\n                                        label=\"姓名\"\r\n                                        rules={[{ required: true, message: '请输入姓名!' }]}\r\n                                    >\r\n                                        <Input autoComplete=\"off\" placeholder=\"请输入姓名\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"idCard\"\r\n                                        label=\"身份证\"\r\n                                        rules={[{ required: true, message: '请输入身份证!' }]}\r\n                                    >\r\n                                        <Input maxLength={18} autoComplete=\"off\" placeholder=\"请输入身份证\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row gutter={16}>\r\n                                <Col span={12}>\r\n                                    <Form.Item\r\n                                        name=\"phone\"\r\n                                        label=\"手机号码\"\r\n                                        rules={[{ required: true, message: '请输入手机号码!' }]}\r\n                                        required=\"true\"\r\n                                    >\r\n                                        <Input maxLength={11} autoComplete=\"off\" placeholder=\"请输入手机号码\" />\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                            <div\r\n                                style={{\r\n                                    textAlign: 'right',\r\n                                    marginTop: '50px'\r\n                                }}\r\n                            >\r\n                                <Space size=\"large\">\r\n                                    <Button onClick={this.onClose} style={{ marginRight: 8 }}>\r\n                                        取消\r\n                                    </Button>\r\n                                    <Button type=\"primary\" htmlType=\"submit\">\r\n                                        确认\r\n                                    </Button>\r\n                                </Space>\r\n\r\n                            </div>\r\n                        </Form>\r\n                    </Drawer>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}